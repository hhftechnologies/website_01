var He=Object.defineProperty,Ee=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var ne=(l,e,t)=>e in l?He(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,K=(l,e)=>{for(var t in e||(e={}))Te.call(e,t)&&ne(l,t,e[t]);if(re)for(var t of re(e))je.call(e,t)&&ne(l,t,e[t]);return l},le=(l,e)=>Ee(l,Se(e));import{X as ye,S as Y,i as z,s as B,e as k,t as D,c as $,a as E,g as V,d as g,b as d,f as P,H as _,h as U,j as W,k as I,m as O,n as L,G as C,o as q,x as A,u as N,v as G,W as x,A as Me,Y as Pe,Z as Ie,I as F,_ as oe,M as Le,$ as Ae,a0 as Ne,a1 as Ce,a2 as Re,r as ie,w as ae,L as ue,a3 as ee,Q as te,a4 as fe,a5 as ce,y as De}from"../chunks/vendor-b386a5bd.js";import{H as Ve,M as We}from"../chunks/HeroText-5bca306d.js";import{w as Oe}from"../chunks/wordmark-0849a013.js";import{S as qe}from"../chunks/Story-32153ea8.js";import"../chunks/stores-c70ea8e6.js";function he({stories:l,category:e,copy:t,filter:r}){const n=l.filter(i=>i.home_text).filter(i=>i.home_pick.includes(r));if(!n.length)return"";ye(n);const s=new RegExp(`\\[${e}\\]`,"g");return t[e].replace(s,()=>{const i=n.pop();return`
    		<a href="https://pudding.cool/${i.url}" rel="external">
    			<span>${i.home_text}</span></a>
				<img src="common/assets/thumbnails/320/${i.slug}.jpg" alt="story thumbnail" />`})}function Ge(l){let e,t,r,n,s,o,i,p,h,f,a=l[7].tagline+"",u,m,S,c,H,w,v,y,j;return{c(){e=k("h1"),t=k("div"),r=I(),n=k("div"),s=k("p"),o=k("span"),i=D("The Pudding"),p=I(),h=k("span"),f=new Pe,u=k("ins"),m=D(l[0]),S=D("."),c=I(),H=k("span"),w=I(),v=k("span"),y=I(),j=k("span"),this.h()},l(b){e=$(b,"H1",{"aria-label":!0});var T=E(e);t=$(T,"DIV",{class:!0});var se=E(t);se.forEach(g),T.forEach(g),r=L(b),n=$(b,"DIV",{class:!0});var X=E(n);s=$(X,"P",{class:!0});var R=E(s);o=$(R,"SPAN",{class:!0});var J=E(o);i=V(J,"The Pudding"),J.forEach(g),p=L(R),h=$(R,"SPAN",{class:!0});var Q=E(h);f=Ie(Q),u=$(Q,"INS",{class:!0});var M=E(u);m=V(M,l[0]),S=V(M,"."),M.forEach(g),Q.forEach(g),c=L(R),H=$(R,"SPAN",{class:!0});var be=E(H);be.forEach(g),w=L(R),v=$(R,"SPAN",{class:!0});var ke=E(v);ke.forEach(g),y=L(R),j=$(R,"SPAN",{class:!0});var $e=E(j);$e.forEach(g),R.forEach(g),X.forEach(g),this.h()},h(){d(t,"class","wordmark svelte-1icc79m"),d(e,"aria-label",l[7].title),d(o,"class","sr-only"),f.a=u,d(u,"class","svelte-1icc79m"),C(u,"is-visible",l[0]),d(h,"class","tagline"),C(h,"is-del",l[0]),d(H,"class","popular svelte-1icc79m"),C(H,"is-visible",l[1]),d(v,"class","personal svelte-1icc79m"),C(v,"is-visible",l[1]),d(j,"class","welcome svelte-1icc79m"),C(j,"is-visible",l[2]),d(s,"class","svelte-1icc79m"),d(n,"class","letter svelte-1icc79m")},m(b,T){P(b,e,T),_(e,t),t.innerHTML=Oe,P(b,r,T),P(b,n,T),_(n,s),_(s,o),_(o,i),_(s,p),_(s,h),f.m(a,h),_(h,u),_(u,m),_(u,S),_(s,c),_(s,H),H.innerHTML=l[1],_(s,w),_(s,v),v.innerHTML=l[2],_(s,y),_(s,j),j.innerHTML=l[5]},p(b,T){T&1&&U(m,b[0]),T&1&&C(u,"is-visible",b[0]),T&1&&C(h,"is-del",b[0]),T&2&&(H.innerHTML=b[1]),T&2&&C(H,"is-visible",b[1]),T&4&&(v.innerHTML=b[2]),T&2&&C(v,"is-visible",b[1]),T&32&&(j.innerHTML=b[5]),T&4&&C(j,"is-visible",b[2])},d(b){b&&g(e),b&&g(r),b&&g(n)}}}function me(l){let e,t,r;return{c(){e=k("a"),t=D(l[3]),this.h()},l(n){e=$(n,"A",{href:!0,"sveltekit:prefetch":!0});var s=E(e);t=V(s,l[3]),s.forEach(g),this.h()},h(){d(e,"href",r="/author/"+l[4]),d(e,"sveltekit:prefetch","")},m(n,s){P(n,e,s),_(e,t)},p(n,s){s&8&&U(t,n[3]),s&16&&r!==(r="/author/"+n[4])&&d(e,"href",r)},d(n){n&&g(e)}}}function Ye(l){let e,t,r,n,s,o,i,p,h;t=new Ve({props:{$$slots:{default:[Ge]},$$scope:{ctx:l}}});let f=l[4]&&me(l);return{c(){e=k("section"),W(t.$$.fragment),r=I(),n=k("div"),s=k("p"),f&&f.c(),o=I(),i=k("p"),p=D(l[6]),this.h()},l(a){e=$(a,"SECTION",{id:!0,class:!0});var u=E(e);O(t.$$.fragment,u),r=L(u),n=$(u,"DIV",{class:!0});var m=E(n);s=$(m,"P",{class:!0});var S=E(s);f&&f.l(S),S.forEach(g),o=L(m),i=$(m,"P",{class:!0});var c=E(i);p=V(c,l[6]),c.forEach(g),m.forEach(g),u.forEach(g),this.h()},h(){d(s,"class","name"),d(i,"class","position"),d(n,"class","signature svelte-1icc79m"),C(n,"is-visible",l[2]),d(e,"id","intro"),d(e,"class","column-wide svelte-1icc79m")},m(a,u){P(a,e,u),q(t,e,null),_(e,r),_(e,n),_(n,s),f&&f.m(s,null),_(n,o),_(n,i),_(i,p),h=!0},p(a,[u]){const m={};u&16423&&(m.$$scope={dirty:u,ctx:a}),t.$set(m),a[4]?f?f.p(a,u):(f=me(a),f.c(),f.m(s,null)):f&&(f.d(1),f=null),(!h||u&64)&&U(p,a[6]),u&4&&C(n,"is-visible",a[2])},i(a){h||(A(t.$$.fragment,a),h=!0)},o(a){N(t.$$.fragment,a),h=!1},d(a){a&&g(e),G(t),f&&f.d()}}}function ze(l,e,t){const{stories:r,staff:n,copy:s}=x("Home");let o="",i="",p="",h="",f="",a="",u="";const m=()=>{t(1,i=he({stories:r,copy:s,category:"popular",filter:"popular"}))},S=()=>{const w=7,{id:v,name:y,slug:j}=n[w],b=r.filter(T=>!i.includes(T.url));t(2,p=he({stories:b,copy:s,category:"personal",filter:v})),t(3,h=y),t(4,f=j)},c=()=>{const w=Math.floor(Math.random()*s.taglines.length);t(0,o=` ${s.taglines[w]}`)},H=()=>{!p||(t(5,a=s.welcome),t(6,u="Pudding team member"))};return Me(()=>{c(),m(),S(),H()}),[o,i,p,h,f,a,u,s]}class Be extends Y{constructor(e){super();z(this,e,ze,Ye,B,{})}}function Ue(l){let e,t,r;return{c(){e=k("a"),t=k("div"),r=k("p"),this.h()},l(n){e=$(n,"A",{href:!0,rel:!0,class:!0});var s=E(e);t=$(s,"DIV",{id:!0});var o=E(t);r=$(o,"P",{});var i=E(r);i.forEach(g),o.forEach(g),s.forEach(g),this.h()},h(){d(t,"id","promo"),d(e,"href",l[1]),d(e,"rel","extenral"),d(e,"class","svelte-1hjqwlk")},m(n,s){P(n,e,s),_(e,t),_(t,r),r.innerHTML=l[0]},p(n,[s]){s&1&&(r.innerHTML=n[0]),s&2&&d(e,"href",n[1])},i:F,o:F,d(n){n&&g(e)}}}function Fe(l,e,t){let{text:r}=e,{link:n}=e;return l.$$set=s=>{"text"in s&&t(0,r=s.text),"link"in s&&t(1,n=s.link)},[r,n]}class Qe extends Y{constructor(e){super();z(this,e,Fe,Ue,B,{text:0,link:1})}}function Xe(l){let e,t,r,n,s,o=l[0].length+"",i,p,h,f,a;return{c(){e=k("div"),t=k("div"),r=k("input"),n=I(),s=k("p"),i=D(o),p=D(" stor"),h=D(l[2]),this.h()},l(u){e=$(u,"DIV",{id:!0,class:!0});var m=E(e);t=$(m,"DIV",{class:!0});var S=E(t);r=$(S,"INPUT",{placeholder:!0,class:!0}),n=L(S),s=$(S,"P",{class:!0});var c=E(s);i=V(c,o),p=V(c," stor"),h=V(c,l[2]),c.forEach(g),S.forEach(g),m.forEach(g),this.h()},h(){d(r,"placeholder","Search stories (e.g., Spotify)"),d(r,"class","svelte-13u3fd0"),d(s,"class","svelte-13u3fd0"),d(t,"class","inner column-wide svelte-13u3fd0"),d(e,"id","search"),d(e,"class","svelte-13u3fd0")},m(u,m){P(u,e,m),_(e,t),_(t,r),oe(r,l[1]),_(t,n),_(t,s),_(s,i),_(s,p),_(s,h),f||(a=Le(r,"input",l[5]),f=!0)},p(u,[m]){m&2&&r.value!==u[1]&&oe(r,u[1]),m&1&&o!==(o=u[0].length+"")&&U(i,o),m&4&&U(h,u[2])},i:F,o:F,d(u){u&&g(e),f=!1,a()}}}const Z=3;function Ze(l,e,t){let r,n,s,{highlight:o}=e;const{stories:i}=x("Home"),p=[{prop:"hed",weight:1},{prop:"dek",weight:1},{prop:"tease",weight:1},{prop:"keyword",weight:2}],h=Ae();let f="";const a=w=>p.map(({prop:v})=>{if(typeof w[v]!="string")return{prop:v,tokens:w[v]};const b=Ne(w[v].toLowerCase()).split(/\W/).filter(T=>T.length>=Z);return{prop:v,tokens:b}}),u=({prop:w,tokens:v},y)=>{const j=y.split(/\W/).filter(M=>M.length>=Z).map(M=>M.toLowerCase()),{weight:b}=p.find(M=>M.prop===w),X=j.map(M=>v.includes(M)).filter(M=>M).length*b,Q=j.map(M=>v.join(" ").includes(M)).filter(M=>M).length*b*.5;return X+Q},m=(w,v)=>{const y=w.map(j=>u(j,v));return Ce(y)},S=w=>{const v=c.map(y=>le(K({},y),{score:m(y.search,w)})).filter(y=>y.score>0);return v.sort((y,j)=>Re(y.score,j.score)),v},c=i.map(w=>({slug:w.slug,search:a(w)}));function H(){f=this.value,t(1,f)}return l.$$set=w=>{"highlight"in w&&t(0,o=w.highlight)},l.$$.update=()=>{l.$$.dirty&2&&t(3,r=f.toLowerCase().trim()),l.$$.dirty&8&&t(4,n=r.length>=Z?S(r):c),l.$$.dirty&16&&t(0,o=n.map(w=>w.slug)),l.$$.dirty&8&&r.length>=Z&&h("focus"),l.$$.dirty&1&&t(2,s=o.length===1?"y":"ies")},[o,f,s,r,n,H]}class Je extends Y{constructor(e){super();z(this,e,Ze,Xe,B,{highlight:0})}}function pe(l,e,t){const r=l.slice();return r[8]=e[t].tease,r[9]=e[t].url,r[10]=e[t].slug,r[11]=e[t].month,r}function ge(l){let e,t,r,n;return t=new qe({props:{tease:l[8],url:l[9],slug:l[10],month:l[11],collapse:!l[0].includes(l[10])}}),{c(){e=k("li"),W(t.$$.fragment),r=I(),this.h()},l(s){e=$(s,"LI",{class:!0});var o=E(e);O(t.$$.fragment,o),r=L(o),o.forEach(g),this.h()},h(){d(e,"class","svelte-7616wr")},m(s,o){P(s,e,o),q(t,e,null),_(e,r),n=!0},p(s,o){const i={};o&4&&(i.tease=s[8]),o&4&&(i.url=s[9]),o&4&&(i.slug=s[10]),o&4&&(i.month=s[11]),o&5&&(i.collapse=!s[0].includes(s[10])),t.$set(i)},i(s){n||(A(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){s&&g(e),G(t)}}}function Ke(l){let e,t,r=l[3].storiesHed+"",n,s,o,i,p=l[2],h=[];for(let a=0;a<p.length;a+=1)h[a]=ge(pe(l,p,a));const f=a=>N(h[a],1,1,()=>{h[a]=null});return{c(){e=k("section"),t=k("h2"),n=D(r),s=I(),o=k("ul");for(let a=0;a<h.length;a+=1)h[a].c();this.h()},l(a){e=$(a,"SECTION",{id:!0,class:!0});var u=E(e);t=$(u,"H2",{class:!0});var m=E(t);n=V(m,r),m.forEach(g),s=L(u),o=$(u,"UL",{});var S=E(o);for(let c=0;c<h.length;c+=1)h[c].l(S);S.forEach(g),u.forEach(g),this.h()},h(){d(t,"class","column-wide upper"),d(e,"id","stories"),d(e,"class","svelte-7616wr")},m(a,u){P(a,e,u),_(e,t),_(t,n),_(e,s),_(e,o);for(let m=0;m<h.length;m+=1)h[m].m(o,null);l[5](e),i=!0},p(a,[u]){if(u&5){p=a[2];let m;for(m=0;m<p.length;m+=1){const S=pe(a,p,m);h[m]?(h[m].p(S,u),A(h[m],1)):(h[m]=ge(S),h[m].c(),A(h[m],1),h[m].m(o,null))}for(ie(),m=p.length;m<h.length;m+=1)f(m);ae()}},i(a){if(!i){for(let u=0;u<p.length;u+=1)A(h[u]);i=!0}},o(a){h=h.filter(Boolean);for(let u=0;u<h.length;u+=1)N(h[u]);i=!1},d(a){a&&g(e),ue(h,a),l[5](null)}}}function xe(l,e,t){const r=()=>{const{top:a}=i.getBoundingClientRect(),u=window.scrollY+a-64;window.scrollTo(0,u)};let{highlight:n}=e;const{stories:s,copy:o}=x("Home");let i;s.sort((a,u)=>ee(a.date,u.date));let p=s.map(a=>K({},a));const h=()=>{p.sort((a,u)=>ee(n.indexOf(a.slug),n.indexOf(u.slug))||ee(a.date,u.date)),t(2,p)};function f(a){te[a?"unshift":"push"](()=>{i=a,t(1,i)})}return l.$$set=a=>{"highlight"in a&&t(0,n=a.highlight)},l.$$.update=()=>{l.$$.dirty&1&&h()},[n,i,p,o,r,f]}class et extends Y{constructor(e){super();z(this,e,xe,Ke,B,{jump:4,highlight:0})}get jump(){return this.$$.ctx[4]}}function _e(l){let e,t;return e=new Qe({props:{text:l[0].promo.text,link:l[0].promo.link}}),{c(){W(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,n){q(e,r,n),t=!0},p(r,n){const s={};n&1&&(s.text=r[0].promo.text),n&1&&(s.link=r[0].promo.link),e.$set(s)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){N(e.$$.fragment,r),t=!1},d(r){G(e,r)}}}function tt(l){let e,t,r,n,s,o,i,p,h;e=new Be({});let f=l[0].promo.text&&_e(l);function a(c){l[6](c)}let u={};l[1]!==void 0&&(u.highlight=l[1]),n=new Je({props:u}),te.push(()=>fe(n,"highlight",a)),n.$on("focus",l[3]);function m(c){l[7](c)}let S={highlight:l[1]};return l[2]!==void 0&&(S.jump=l[2]),i=new et({props:S}),te.push(()=>fe(i,"jump",m)),{c(){W(e.$$.fragment),t=I(),f&&f.c(),r=I(),W(n.$$.fragment),o=I(),W(i.$$.fragment)},l(c){O(e.$$.fragment,c),t=L(c),f&&f.l(c),r=L(c),O(n.$$.fragment,c),o=L(c),O(i.$$.fragment,c)},m(c,H){q(e,c,H),P(c,t,H),f&&f.m(c,H),P(c,r,H),q(n,c,H),P(c,o,H),q(i,c,H),h=!0},p(c,[H]){c[0].promo.text?f?(f.p(c,H),H&1&&A(f,1)):(f=_e(c),f.c(),A(f,1),f.m(r.parentNode,r)):f&&(ie(),N(f,1,1,()=>{f=null}),ae());const w={};!s&&H&2&&(s=!0,w.highlight=c[1],ce(()=>s=!1)),n.$set(w);const v={};H&2&&(v.highlight=c[1]),!p&&H&4&&(p=!0,v.jump=c[2],ce(()=>p=!1)),i.$set(v)},i(c){h||(A(e.$$.fragment,c),A(f),A(n.$$.fragment,c),A(i.$$.fragment,c),h=!0)},o(c){N(e.$$.fragment,c),N(f),N(n.$$.fragment,c),N(i.$$.fragment,c),h=!1},d(c){G(e,c),c&&g(t),f&&f.d(c),c&&g(r),G(n,c),c&&g(o),G(i,c)}}}function st(l,e,t){let{copy:r}=e,{stories:n}=e,{staff:s}=e,o=n.map(a=>a.slug),i;De("Home",{stories:n,staff:s,copy:r});const p=()=>i();function h(a){o=a,t(1,o)}function f(a){i=a,t(2,i)}return l.$$set=a=>{"copy"in a&&t(0,r=a.copy),"stories"in a&&t(4,n=a.stories),"staff"in a&&t(5,s=a.staff)},[r,o,i,p,n,s,h,f]}class rt extends Y{constructor(e){super();z(this,e,st,tt,B,{copy:0,stories:4,staff:5})}}function de(l,e,t){const r=l.slice();return r[1]=e[t],r}function ve(l){let e,t=l[1]+"",r,n;return{c(){e=k("a"),r=D(t),this.h()},l(s){e=$(s,"A",{href:!0});var o=E(e);r=V(o,t),o.forEach(g),this.h()},h(){d(e,"href",n="/author/"+l[1])},m(s,o){P(s,e,o),_(e,r)},p(s,o){o&1&&t!==(t=s[1]+"")&&U(r,t),o&1&&n!==(n="/author/"+s[1])&&d(e,"href",n)},d(s){s&&g(e)}}}function nt(l){let e,t=l[0],r=[];for(let n=0;n<t.length;n+=1)r[n]=ve(de(l,t,n));return{c(){e=k("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=$(n,"DIV",{class:!0});var s=E(e);for(let o=0;o<r.length;o+=1)r[o].l(s);s.forEach(g),this.h()},h(){d(e,"class","svelte-1l89d97")},m(n,s){P(n,e,s);for(let o=0;o<r.length;o+=1)r[o].m(e,null)},p(n,[s]){if(s&1){t=n[0];let o;for(o=0;o<t.length;o+=1){const i=de(n,t,o);r[o]?r[o].p(i,s):(r[o]=ve(i),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},i:F,o:F,d(n){n&&g(e),ue(r,n)}}}function lt(l,e,t){let{authors:r}=e;return l.$$set=n=>{"authors"in n&&t(0,r=n.authors)},[r]}class ot extends Y{constructor(e){super();z(this,e,lt,nt,B,{authors:0})}}const it="The Pudding",at="The Pudding explains ideas debated in culture with visual essays.",ut={text:"What\u2019s behind our name?",link:"https://www.npr.org/2012/08/24/159975466/corrections-and-comments-to-stories"},ft="is a digital publication that <del>explains ideas debated in culture with visual essays</del>",ct="You might have seen our story on [popular], but we\u2019ve also made stuff about [popular], [popular] or [popular].",ht="Some of my favorite projects are about [personal], [personal], and [personal].",mt="So, welcome to The Pudding. Get  cozy, you could be here a while. Explore all of our stories below.",pt="Our Stories",gt=["makes cool shit on the internet","makes awesome stories with data","brings you longform data journalism","creates visual essays with data","makes data fun","is the best internet rabbit hole"];var we={title:it,description:at,promo:ut,tagline:ft,popular:ct,personal:ht,welcome:mt,storiesHed:pt,taglines:gt};function _t(l){let e,t,r,n,s,o;return e=new We({props:{copy:we}}),r=new rt({props:{copy:we,stories:l[0],staff:l[1]}}),s=new ot({props:{authors:l[2]}}),{c(){W(e.$$.fragment),t=I(),W(r.$$.fragment),n=I(),W(s.$$.fragment)},l(i){O(e.$$.fragment,i),t=L(i),O(r.$$.fragment,i),n=L(i),O(s.$$.fragment,i)},m(i,p){q(e,i,p),P(i,t,p),q(r,i,p),P(i,n,p),q(s,i,p),o=!0},p(i,[p]){const h={};p&1&&(h.stories=i[0]),p&2&&(h.staff=i[1]),r.$set(h);const f={};p&4&&(f.authors=i[2]),s.$set(f)},i(i){o||(A(e.$$.fragment,i),A(r.$$.fragment,i),A(s.$$.fragment,i),o=!0)},o(i){N(e.$$.fragment,i),N(r.$$.fragment,i),N(s.$$.fragment,i),o=!1},d(i){G(e,i),i&&g(t),G(r,i),i&&g(n),G(s,i)}}}async function Et({fetch:l}){const t=await l("/api/home.json");if(t.ok){const{stories:r,staff:n,authors:s}=await t.json();return{props:{stories:r,staff:n,authors:s}}}return{status:t.status,error:new Error("Could not load data")}}function dt(l,e,t){let{stories:r}=e,{staff:n}=e,{authors:s}=e;return l.$$set=o=>{"stories"in o&&t(0,r=o.stories),"staff"in o&&t(1,n=o.staff),"authors"in o&&t(2,s=o.authors)},[r,n,s]}class St extends Y{constructor(e){super();z(this,e,dt,_t,B,{stories:0,staff:1,authors:2})}}export{St as default,Et as load};
