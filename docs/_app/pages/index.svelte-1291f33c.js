var Se=Object.defineProperty,Ee=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var ne=(o,e,t)=>e in o?Se(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,x=(o,e)=>{for(var t in e||(e={}))ke.call(e,t)&&ne(o,t,e[t]);if(re)for(var t of re(e))Me.call(e,t)&&ne(o,t,e[t]);return o},oe=(o,e)=>Ee(o,Te(e));import{U as ye,S as W,i as z,s as G,e as $,t as U,c as H,a as E,g as Y,d as _,b as v,f as j,H as d,h as X,j as D,k as L,m as V,n as I,G as C,o as O,x as P,u as N,v as q,V as ee,A as je,W as Pe,X as Le,I as B,Y as le,L as Ie,Z as Ae,_ as Ne,$ as Ce,a0 as Re,r as ae,w as ie,K as ue,a1 as te,O as se,a2 as ce,a3 as fe,y as De}from"../chunks/vendor-868b2ba2.js";import{M as Ve}from"../chunks/Meta-9d4959a9.js";import{H as Oe}from"../chunks/HeroText-163ecf91.js";import{w as qe}from"../chunks/wordmark-0849a013.js";import{S as We}from"../chunks/Story-869cacdb.js";function he({stories:o,copy:e,category:t,filterFunction:s}){s=s||(()=>!0);const r=`home_${t}`,n=o.filter(m=>m[r]).filter(s);if(!n.length)return"";ye(n);const l=new RegExp(`\\[${t}\\]`,"g");return e[t].replace(l,()=>{const m=n.pop();return`
    		<a href="https://pudding.cool/${m.url}" rel="external">
    			<span>${m[r]}</span>
    			<img src="common/assets/thumbnails/320/${m.slug}.jpg" alt="" /></a>`})}function ze(o){let e,t,s,r,n,l,a,m,u,f,i=o[7].tagline+"",h,g,k,c,p,S,b,A,y;return{c(){e=$("h1"),t=$("div"),s=L(),r=$("div"),n=$("p"),l=$("span"),a=U("The Pudding"),m=L(),u=$("span"),f=new Pe,h=$("span"),g=U(o[0]),k=U("."),c=L(),p=$("span"),S=L(),b=$("span"),A=L(),y=$("span"),this.h()},l(w){e=H(w,"H1",{"aria-label":!0});var T=E(e);t=H(T,"DIV",{class:!0});var F=E(t);F.forEach(_),T.forEach(_),s=I(w),r=H(w,"DIV",{class:!0});var J=E(r);n=H(J,"P",{class:!0});var R=E(n);l=H(R,"SPAN",{class:!0});var K=E(l);a=Y(K,"The Pudding"),K.forEach(_),m=I(R),u=H(R,"SPAN",{class:!0});var M=E(u);f=Le(M),h=H(M,"SPAN",{class:!0});var Q=E(h);g=Y(Q,o[0]),k=Y(Q,"."),Q.forEach(_),M.forEach(_),c=I(R),p=H(R,"SPAN",{class:!0});var we=E(p);we.forEach(_),S=I(R),b=H(R,"SPAN",{class:!0});var $e=E(b);$e.forEach(_),A=I(R),y=H(R,"SPAN",{class:!0});var He=E(y);He.forEach(_),R.forEach(_),J.forEach(_),this.h()},h(){v(t,"class","wordmark svelte-oco55t"),v(e,"aria-label",o[7].title),v(l,"class","sr-only"),f.a=h,v(h,"class","tagline-alt svelte-oco55t"),C(h,"is-visible",o[0]),v(u,"class","tagline"),C(u,"is-del",o[0]),v(p,"class","popular svelte-oco55t"),C(p,"is-visible",o[1]),v(b,"class","personal svelte-oco55t"),C(b,"is-visible",o[1]),v(y,"class","welcome svelte-oco55t"),C(y,"is-visible",o[2]),v(n,"class","svelte-oco55t"),v(r,"class","letter svelte-oco55t")},m(w,T){j(w,e,T),d(e,t),t.innerHTML=qe,j(w,s,T),j(w,r,T),d(r,n),d(n,l),d(l,a),d(n,m),d(n,u),f.m(i,u),d(u,h),d(h,g),d(h,k),d(n,c),d(n,p),p.innerHTML=o[1],d(n,S),d(n,b),b.innerHTML=o[2],d(n,A),d(n,y),y.innerHTML=o[5]},p(w,T){T&1&&X(g,w[0]),T&1&&C(h,"is-visible",w[0]),T&1&&C(u,"is-del",w[0]),T&2&&(p.innerHTML=w[1]),T&2&&C(p,"is-visible",w[1]),T&4&&(b.innerHTML=w[2]),T&2&&C(b,"is-visible",w[1]),T&32&&(y.innerHTML=w[5]),T&4&&C(y,"is-visible",w[2])},d(w){w&&_(e),w&&_(s),w&&_(r)}}}function me(o){let e,t,s;return{c(){e=$("a"),t=U(o[3]),this.h()},l(r){e=H(r,"A",{href:!0});var n=E(e);t=Y(n,o[3]),n.forEach(_),this.h()},h(){v(e,"href",s="/author/"+o[4])},m(r,n){j(r,e,n),d(e,t)},p(r,n){n&8&&X(t,r[3]),n&16&&s!==(s="/author/"+r[4])&&v(e,"href",s)},d(r){r&&_(e)}}}function Ge(o){let e,t,s,r,n,l,a,m,u;t=new Oe({props:{$$slots:{default:[ze]},$$scope:{ctx:o}}});let f=o[4]&&me(o);return{c(){e=$("section"),D(t.$$.fragment),s=L(),r=$("div"),n=$("p"),f&&f.c(),l=L(),a=$("p"),m=U(o[6]),this.h()},l(i){e=H(i,"SECTION",{id:!0,class:!0});var h=E(e);V(t.$$.fragment,h),s=I(h),r=H(h,"DIV",{class:!0});var g=E(r);n=H(g,"P",{class:!0});var k=E(n);f&&f.l(k),k.forEach(_),l=I(g),a=H(g,"P",{class:!0});var c=E(a);m=Y(c,o[6]),c.forEach(_),g.forEach(_),h.forEach(_),this.h()},h(){v(n,"class","name"),v(a,"class","position"),v(r,"class","signature svelte-oco55t"),C(r,"is-visible",o[2]),v(e,"id","intro"),v(e,"class","column svelte-oco55t")},m(i,h){j(i,e,h),O(t,e,null),d(e,s),d(e,r),d(r,n),f&&f.m(n,null),d(r,l),d(r,a),d(a,m),u=!0},p(i,[h]){const g={};h&16423&&(g.$$scope={dirty:h,ctx:i}),t.$set(g),i[4]?f?f.p(i,h):(f=me(i),f.c(),f.m(n,null)):f&&(f.d(1),f=null),(!u||h&64)&&X(m,i[6]),h&4&&C(r,"is-visible",i[2])},i(i){u||(P(t.$$.fragment,i),u=!0)},o(i){N(t.$$.fragment,i),u=!1},d(i){i&&_(e),q(t),f&&f.d()}}}function Ue(o,e,t){const{stories:s,staff:r,copy:n}=ee("Home");let l="",a="",m="",u="",f="",i="",h="";const g=()=>{t(1,a=he({stories:s,copy:n,category:"popular"}))},k=()=>{Math.floor(Math.random()*r.length);const{id:S,name:b,slug:A}=r[1];console.log(r);const y=T=>T.personal_pick.includes(S),w=s.filter(T=>!a.includes(T.url));t(2,m=he({stories:w,copy:n,category:"personal",filterFunction:y})),t(3,u=b),t(4,f=A)},c=()=>{const S=Math.floor(Math.random()*n.altTaglines.length);t(0,l=` ${n.altTaglines[S]}`)},p=()=>{!m||(t(5,i=n.welcome),t(6,h="Pudding team member"))};return je(()=>{c(),g(),k(),p()}),[l,a,m,u,f,i,h,n]}class Ye extends W{constructor(e){super();z(this,e,Ue,Ge,G,{})}}function Be(o){let e;return{c(){e=$("div"),this.h()},l(t){e=H(t,"DIV",{class:!0});var s=E(e);s.forEach(_),this.h()},h(){v(e,"class","svelte-het5lh")},m(t,s){j(t,e,s),e.innerHTML=o[0]},p(t,[s]){s&1&&(e.innerHTML=t[0])},i:B,o:B,d(t){t&&_(e)}}}function Ke(o,e,t){let{content:s}=e;return o.$$set=r=>{"content"in r&&t(0,s=r.content)},[s]}class Xe extends W{constructor(e){super();z(this,e,Ke,Be,G,{content:0})}}function Ze(o){let e,t,s,r,n;return{c(){e=$("div"),t=$("div"),s=$("input"),this.h()},l(l){e=H(l,"DIV",{id:!0,class:!0});var a=E(e);t=H(a,"DIV",{class:!0});var m=E(t);s=H(m,"INPUT",{placeholder:!0,class:!0}),m.forEach(_),a.forEach(_),this.h()},h(){v(s,"placeholder","Search stories (e.g., Spotify)"),v(s,"class","svelte-k4b5lh"),v(t,"class","inner column"),v(e,"id","search"),v(e,"class","svelte-k4b5lh")},m(l,a){j(l,e,a),d(e,t),d(t,s),le(s,o[0]),r||(n=Ie(s,"input",o[4]),r=!0)},p(l,[a]){a&1&&s.value!==l[0]&&le(s,l[0])},i:B,o:B,d(l){l&&_(e),r=!1,n()}}}const Z=3;function Fe(o,e,t){let s,r,{highlight:n}=e;const{stories:l}=ee("Home"),a=[{prop:"hed",weight:1},{prop:"dek",weight:1},{prop:"tease",weight:1},{prop:"keyword",weight:2}],m=Ae();let u="";const f=p=>a.map(({prop:S})=>{if(typeof p[S]!="string")return{prop:S,tokens:p[S]};const y=Ne(p[S].toLowerCase()).split(/\W/).filter(w=>w.length>=Z);return{prop:S,tokens:y}}),i=({prop:p,tokens:S},b)=>{const A=b.split(/\W/).filter(M=>M.length>=Z).map(M=>M.toLowerCase()),{weight:y}=a.find(M=>M.prop===p),F=A.map(M=>S.includes(M)).filter(M=>M).length*y,K=A.map(M=>S.join(" ").includes(M)).filter(M=>M).length*y*.5;return F+K},h=(p,S)=>{const b=p.map(A=>i(A,S));return Ce(b)},g=p=>{const S=k.map(b=>oe(x({},b),{score:h(b.search,p)})).filter(b=>b.score>0);return S.sort((b,A)=>Re(b.score,A.score)),S},k=l.map(p=>({slug:p.slug,search:f(p)}));function c(){u=this.value,t(0,u)}return o.$$set=p=>{"highlight"in p&&t(1,n=p.highlight)},o.$$.update=()=>{o.$$.dirty&1&&t(2,s=u.toLowerCase().trim()),o.$$.dirty&4&&t(3,r=s.length>=Z?g(s):k),o.$$.dirty&8&&t(1,n=r.map(p=>p.slug)),o.$$.dirty&4&&s.length>=Z&&m("focus")},[u,n,s,r,c]}class Je extends W{constructor(e){super();z(this,e,Fe,Ze,G,{highlight:1})}}function pe(o,e,t){const s=o.slice();return s[8]=e[t].tease,s[9]=e[t].url,s[10]=e[t].slug,s}function ge(o){let e,t,s,r;return t=new We({props:{tease:o[8],url:o[9],slug:o[10],collapse:!o[0].includes(o[10])}}),{c(){e=$("li"),D(t.$$.fragment),s=L()},l(n){e=H(n,"LI",{});var l=E(e);V(t.$$.fragment,l),s=I(l),l.forEach(_)},m(n,l){j(n,e,l),O(t,e,null),d(e,s),r=!0},p(n,l){const a={};l&4&&(a.tease=n[8]),l&4&&(a.url=n[9]),l&4&&(a.slug=n[10]),l&5&&(a.collapse=!n[0].includes(n[10])),t.$set(a)},i(n){r||(P(t.$$.fragment,n),r=!0)},o(n){N(t.$$.fragment,n),r=!1},d(n){n&&_(e),q(t)}}}function Qe(o){let e,t,s=o[3].storiesHed+"",r,n,l,a,m=o[2],u=[];for(let i=0;i<m.length;i+=1)u[i]=ge(pe(o,m,i));const f=i=>N(u[i],1,1,()=>{u[i]=null});return{c(){e=$("section"),t=$("h2"),r=U(s),n=L(),l=$("ul");for(let i=0;i<u.length;i+=1)u[i].c();this.h()},l(i){e=H(i,"SECTION",{id:!0,class:!0});var h=E(e);t=H(h,"H2",{class:!0});var g=E(t);r=Y(g,s),g.forEach(_),n=I(h),l=H(h,"UL",{});var k=E(l);for(let c=0;c<u.length;c+=1)u[c].l(k);k.forEach(_),h.forEach(_),this.h()},h(){v(t,"class","column svelte-1wqvgrz"),v(e,"id","stories"),v(e,"class","svelte-1wqvgrz")},m(i,h){j(i,e,h),d(e,t),d(t,r),d(e,n),d(e,l);for(let g=0;g<u.length;g+=1)u[g].m(l,null);o[5](e),a=!0},p(i,[h]){if(h&5){m=i[2];let g;for(g=0;g<m.length;g+=1){const k=pe(i,m,g);u[g]?(u[g].p(k,h),P(u[g],1)):(u[g]=ge(k),u[g].c(),P(u[g],1),u[g].m(l,null))}for(ae(),g=m.length;g<u.length;g+=1)f(g);ie()}},i(i){if(!a){for(let h=0;h<m.length;h+=1)P(u[h]);a=!0}},o(i){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)N(u[h]);a=!1},d(i){i&&_(e),ue(u,i),o[5](null)}}}function xe(o,e,t){const s=()=>{const{top:i}=a.getBoundingClientRect(),h=window.scrollY+i-64;window.scrollTo(0,h)};let{highlight:r}=e;const{stories:n,copy:l}=ee("Home");let a;n.sort((i,h)=>te(i.date,h.date));let m=n.map(i=>x({},i));const u=()=>{m.sort((i,h)=>te(r.indexOf(i.slug),r.indexOf(h.slug))||te(i.date,h.date)),t(2,m)};function f(i){se[i?"unshift":"push"](()=>{a=i,t(1,a)})}return o.$$set=i=>{"highlight"in i&&t(0,r=i.highlight)},o.$$.update=()=>{o.$$.dirty&1&&u()},[r,a,m,l,s,f]}class et extends W{constructor(e){super();z(this,e,xe,Qe,G,{jump:4,highlight:0})}get jump(){return this.$$.ctx[4]}}function _e(o){let e,t;return e=new Xe({props:{content:o[0].promo}}),{c(){D(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,r){O(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.content=s[0].promo),e.$set(n)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function tt(o){let e,t,s,r,n,l,a,m,u;e=new Ye({});let f=o[0].promo&&_e(o);function i(c){o[6](c)}let h={};o[1]!==void 0&&(h.highlight=o[1]),r=new Je({props:h}),se.push(()=>ce(r,"highlight",i)),r.$on("focus",o[3]);function g(c){o[7](c)}let k={highlight:o[1]};return o[2]!==void 0&&(k.jump=o[2]),a=new et({props:k}),se.push(()=>ce(a,"jump",g)),{c(){D(e.$$.fragment),t=L(),f&&f.c(),s=L(),D(r.$$.fragment),l=L(),D(a.$$.fragment)},l(c){V(e.$$.fragment,c),t=I(c),f&&f.l(c),s=I(c),V(r.$$.fragment,c),l=I(c),V(a.$$.fragment,c)},m(c,p){O(e,c,p),j(c,t,p),f&&f.m(c,p),j(c,s,p),O(r,c,p),j(c,l,p),O(a,c,p),u=!0},p(c,[p]){c[0].promo?f?(f.p(c,p),p&1&&P(f,1)):(f=_e(c),f.c(),P(f,1),f.m(s.parentNode,s)):f&&(ae(),N(f,1,1,()=>{f=null}),ie());const S={};!n&&p&2&&(n=!0,S.highlight=c[1],fe(()=>n=!1)),r.$set(S);const b={};p&2&&(b.highlight=c[1]),!m&&p&4&&(m=!0,b.jump=c[2],fe(()=>m=!1)),a.$set(b)},i(c){u||(P(e.$$.fragment,c),P(f),P(r.$$.fragment,c),P(a.$$.fragment,c),u=!0)},o(c){N(e.$$.fragment,c),N(f),N(r.$$.fragment,c),N(a.$$.fragment,c),u=!1},d(c){q(e,c),c&&_(t),f&&f.d(c),c&&_(s),q(r,c),c&&_(l),q(a,c)}}}function st(o,e,t){let{copy:s}=e,{stories:r}=e,{staff:n}=e,l=r.map(i=>i.slug),a;De("Home",{stories:r,staff:n,copy:s});const m=()=>a();function u(i){l=i,t(1,l)}function f(i){a=i,t(2,a)}return o.$$set=i=>{"copy"in i&&t(0,s=i.copy),"stories"in i&&t(4,r=i.stories),"staff"in i&&t(5,n=i.staff)},[s,l,a,m,r,n,u,f]}class rt extends W{constructor(e){super();z(this,e,st,tt,G,{copy:0,stories:4,staff:5})}}function de(o,e,t){const s=o.slice();return s[1]=e[t],s}function ve(o){let e,t=o[1]+"",s,r;return{c(){e=$("a"),s=U(t),this.h()},l(n){e=H(n,"A",{href:!0});var l=E(e);s=Y(l,t),l.forEach(_),this.h()},h(){v(e,"href",r="/author/"+o[1])},m(n,l){j(n,e,l),d(e,s)},p(n,l){l&1&&t!==(t=n[1]+"")&&X(s,t),l&1&&r!==(r="/author/"+n[1])&&v(e,"href",r)},d(n){n&&_(e)}}}function nt(o){let e,t=o[0],s=[];for(let r=0;r<t.length;r+=1)s[r]=ve(de(o,t,r));return{c(){e=$("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=H(r,"DIV",{class:!0});var n=E(e);for(let l=0;l<s.length;l+=1)s[l].l(n);n.forEach(_),this.h()},h(){v(e,"class","svelte-1l89d97")},m(r,n){j(r,e,n);for(let l=0;l<s.length;l+=1)s[l].m(e,null)},p(r,[n]){if(n&1){t=r[0];let l;for(l=0;l<t.length;l+=1){const a=de(r,t,l);s[l]?s[l].p(a,n):(s[l]=ve(a),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}},i:B,o:B,d(r){r&&_(e),ue(s,r)}}}function ot(o,e,t){let{authors:s}=e;return o.$$set=r=>{"authors"in r&&t(0,s=r.authors)},[s]}class lt extends W{constructor(e){super();z(this,e,ot,nt,G,{authors:0})}}const at="The Pudding",it="",ut="is a digital publication that <del>explains ideas debated in culture with visual essays</del>",ct="You might have seen our story on [popular], but we\u2019ve also made stuff about [popular] [popular] or [popular].",ft="Some of my favorite projects are about [personal], [personal], and [personal].",ht="So, welcome to The Pudding. Get  cozy, you could be here a while. Explore all of our stories below.",mt="Our Stories",pt=["makes cool shit on the internet","makes awesome stories with data","crafts data into stories about culture","brings you longform data journalism","creates visual essays with data"];var be={title:at,promo:it,tagline:ut,popular:ct,personal:ft,welcome:ht,storiesHed:mt,altTaglines:pt};function gt(o){let e,t,s,r,n,l;return e=new Ve({props:{copy:be}}),s=new rt({props:{copy:be,stories:o[0],staff:o[1]}}),n=new lt({props:{authors:o[2]}}),{c(){D(e.$$.fragment),t=L(),D(s.$$.fragment),r=L(),D(n.$$.fragment)},l(a){V(e.$$.fragment,a),t=I(a),V(s.$$.fragment,a),r=I(a),V(n.$$.fragment,a)},m(a,m){O(e,a,m),j(a,t,m),O(s,a,m),j(a,r,m),O(n,a,m),l=!0},p(a,[m]){const u={};m&1&&(u.stories=a[0]),m&2&&(u.staff=a[1]),s.$set(u);const f={};m&4&&(f.authors=a[2]),n.$set(f)},i(a){l||(P(e.$$.fragment,a),P(s.$$.fragment,a),P(n.$$.fragment,a),l=!0)},o(a){N(e.$$.fragment,a),N(s.$$.fragment,a),N(n.$$.fragment,a),l=!1},d(a){q(e,a),a&&_(t),q(s,a),a&&_(r),q(n,a)}}}async function St({fetch:o}){const t=await o("/api/home.json");if(t.ok){const{stories:s,staff:r,authors:n}=await t.json();return{props:{stories:s,staff:r,authors:n}}}return{status:t.status,error:new Error("Could not load data")}}function _t(o,e,t){let{stories:s}=e,{staff:r}=e,{authors:n}=e;return o.$$set=l=>{"stories"in l&&t(0,s=l.stories),"staff"in l&&t(1,r=l.staff),"authors"in l&&t(2,n=l.authors)},[s,r,n]}class Et extends W{constructor(e){super();z(this,e,_t,gt,G,{stories:0,staff:1,authors:2})}}export{Et as default,St as load};
