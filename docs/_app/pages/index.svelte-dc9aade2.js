var Se=Object.defineProperty,Ee=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ne=(l,e,t)=>e in l?Se(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Q=(l,e)=>{for(var t in e||(e={}))ke.call(e,t)&&ne(l,t,e[t]);if(re)for(var t of re(e))Te.call(e,t)&&ne(l,t,e[t]);return l},le=(l,e)=>Ee(l,je(e));import{W as ye,S as Y,i as z,s as B,e as H,t as D,c as S,a as E,g as V,d as g,b as d,f as P,H as _,h as U,j as O,k as I,m as W,n as L,G as C,o as q,x as N,u as A,v as G,V as x,A as Me,X as Pe,Y as Ie,I as F,Z as oe,L as Le,_ as Ne,$ as Ae,a0 as Ce,a1 as Re,r as ae,w as ie,K as ue,a2 as ee,P as te,a3 as fe,a4 as ce,y as De}from"../chunks/vendor-7d7a86b1.js";import{H as Ve,M as Oe}from"../chunks/HeroText-895a3f30.js";import{w as We}from"../chunks/wordmark-7ce1bb0c.js";import{S as qe}from"../chunks/Story-9f25c694.js";import"../chunks/stores-5c3721f3.js";function he({stories:l,category:e,copy:t,filter:s}){const n=l.filter(a=>a.home_text).filter(a=>a.home_pick.includes(s));if(!n.length)return"";ye(n);const r=new RegExp(`\\[${e}\\]`,"g");return t[e].replace(r,()=>{const a=n.pop();return`
    		<a href="https://pudding.cool/${a.url}" rel="external">
    			<span>${a.home_text}</span></a>
				<img src="common/assets/thumbnails/320/${a.slug}.jpg" alt="story thumbnail" />`})}function Ge(l){let e,t,s,n,r,o,a,p,h,f,i=l[7].tagline+"",u,m,j,c,$,b,v,y,T;return{c(){e=H("h1"),t=H("div"),s=I(),n=H("div"),r=H("p"),o=H("span"),a=D("The Pudding"),p=I(),h=H("span"),f=new Pe,u=H("ins"),m=D(l[0]),j=D("."),c=I(),$=H("span"),b=I(),v=H("span"),y=I(),T=H("span"),this.h()},l(w){e=S(w,"H1",{"aria-label":!0});var k=E(e);t=S(k,"DIV",{class:!0});var se=E(t);se.forEach(g),k.forEach(g),s=L(w),n=S(w,"DIV",{class:!0});var X=E(n);r=S(X,"P",{class:!0});var R=E(r);o=S(R,"SPAN",{class:!0});var J=E(o);a=V(J,"The Pudding"),J.forEach(g),p=L(R),h=S(R,"SPAN",{class:!0});var K=E(h);f=Ie(K),u=S(K,"INS",{class:!0});var M=E(u);m=V(M,l[0]),j=V(M,"."),M.forEach(g),K.forEach(g),c=L(R),$=S(R,"SPAN",{class:!0});var we=E($);we.forEach(g),b=L(R),v=S(R,"SPAN",{class:!0});var $e=E(v);$e.forEach(g),y=L(R),T=S(R,"SPAN",{class:!0});var He=E(T);He.forEach(g),R.forEach(g),X.forEach(g),this.h()},h(){d(t,"class","wordmark svelte-1cerj06"),d(e,"aria-label",l[7].title),d(o,"class","sr-only"),f.a=u,d(u,"class","svelte-1cerj06"),C(u,"is-visible",l[0]),d(h,"class","tagline"),C(h,"is-del",l[0]),d($,"class","popular svelte-1cerj06"),C($,"is-visible",l[1]),d(v,"class","personal svelte-1cerj06"),C(v,"is-visible",l[1]),d(T,"class","welcome svelte-1cerj06"),C(T,"is-visible",l[2]),d(r,"class","svelte-1cerj06"),d(n,"class","letter svelte-1cerj06")},m(w,k){P(w,e,k),_(e,t),t.innerHTML=We,P(w,s,k),P(w,n,k),_(n,r),_(r,o),_(o,a),_(r,p),_(r,h),f.m(i,h),_(h,u),_(u,m),_(u,j),_(r,c),_(r,$),$.innerHTML=l[1],_(r,b),_(r,v),v.innerHTML=l[2],_(r,y),_(r,T),T.innerHTML=l[5]},p(w,k){k&1&&U(m,w[0]),k&1&&C(u,"is-visible",w[0]),k&1&&C(h,"is-del",w[0]),k&2&&($.innerHTML=w[1]),k&2&&C($,"is-visible",w[1]),k&4&&(v.innerHTML=w[2]),k&2&&C(v,"is-visible",w[1]),k&32&&(T.innerHTML=w[5]),k&4&&C(T,"is-visible",w[2])},d(w){w&&g(e),w&&g(s),w&&g(n)}}}function me(l){let e,t,s;return{c(){e=H("a"),t=D(l[3]),this.h()},l(n){e=S(n,"A",{href:!0,"sveltekit:prefetch":!0});var r=E(e);t=V(r,l[3]),r.forEach(g),this.h()},h(){d(e,"href",s="/author/"+l[4]),d(e,"sveltekit:prefetch","")},m(n,r){P(n,e,r),_(e,t)},p(n,r){r&8&&U(t,n[3]),r&16&&s!==(s="/author/"+n[4])&&d(e,"href",s)},d(n){n&&g(e)}}}function Ye(l){let e,t,s,n,r,o,a,p,h;t=new Ve({props:{$$slots:{default:[Ge]},$$scope:{ctx:l}}});let f=l[4]&&me(l);return{c(){e=H("section"),O(t.$$.fragment),s=I(),n=H("div"),r=H("p"),f&&f.c(),o=I(),a=H("p"),p=D(l[6]),this.h()},l(i){e=S(i,"SECTION",{id:!0,class:!0});var u=E(e);W(t.$$.fragment,u),s=L(u),n=S(u,"DIV",{class:!0});var m=E(n);r=S(m,"P",{class:!0});var j=E(r);f&&f.l(j),j.forEach(g),o=L(m),a=S(m,"P",{class:!0});var c=E(a);p=V(c,l[6]),c.forEach(g),m.forEach(g),u.forEach(g),this.h()},h(){d(r,"class","name"),d(a,"class","position"),d(n,"class","signature svelte-1cerj06"),C(n,"is-visible",l[2]),d(e,"id","intro"),d(e,"class","column-wide svelte-1cerj06")},m(i,u){P(i,e,u),q(t,e,null),_(e,s),_(e,n),_(n,r),f&&f.m(r,null),_(n,o),_(n,a),_(a,p),h=!0},p(i,[u]){const m={};u&16423&&(m.$$scope={dirty:u,ctx:i}),t.$set(m),i[4]?f?f.p(i,u):(f=me(i),f.c(),f.m(r,null)):f&&(f.d(1),f=null),(!h||u&64)&&U(p,i[6]),u&4&&C(n,"is-visible",i[2])},i(i){h||(N(t.$$.fragment,i),h=!0)},o(i){A(t.$$.fragment,i),h=!1},d(i){i&&g(e),G(t),f&&f.d()}}}function ze(l,e,t){const{stories:s,staff:n,copy:r}=x("Home");let o="",a="",p="",h="",f="",i="",u="";const m=()=>{t(1,a=he({stories:s,copy:r,category:"popular",filter:"popular"}))},j=()=>{const b=Math.floor(Math.random()*n.length),{id:v,name:y,slug:T}=n[b],w=s.filter(k=>!a.includes(k.url));t(2,p=he({stories:w,copy:r,category:"personal",filter:v})),t(3,h=y),t(4,f=T)},c=()=>{const b=Math.floor(Math.random()*r.taglines.length);t(0,o=` ${r.taglines[b]}`)},$=()=>{!p||(t(5,i=r.welcome),t(6,u="Pudding team member"))};return Me(()=>{c(),m(),j(),$()}),[o,a,p,h,f,i,u,r]}class Be extends Y{constructor(e){super();z(this,e,ze,Ye,B,{})}}function Ue(l){let e;return{c(){e=H("div"),this.h()},l(t){e=S(t,"DIV",{class:!0});var s=E(e);s.forEach(g),this.h()},h(){d(e,"class","svelte-het5lh")},m(t,s){P(t,e,s),e.innerHTML=l[0]},p(t,[s]){s&1&&(e.innerHTML=t[0])},i:F,o:F,d(t){t&&g(e)}}}function Fe(l,e,t){let{content:s}=e;return l.$$set=n=>{"content"in n&&t(0,s=n.content)},[s]}class Ke extends Y{constructor(e){super();z(this,e,Fe,Ue,B,{content:0})}}function Xe(l){let e,t,s,n,r,o=l[0].length+"",a,p,h,f,i;return{c(){e=H("div"),t=H("div"),s=H("input"),n=I(),r=H("p"),a=D(o),p=D(" stor"),h=D(l[2]),this.h()},l(u){e=S(u,"DIV",{id:!0,class:!0});var m=E(e);t=S(m,"DIV",{class:!0});var j=E(t);s=S(j,"INPUT",{placeholder:!0,class:!0}),n=L(j),r=S(j,"P",{class:!0});var c=E(r);a=V(c,o),p=V(c," stor"),h=V(c,l[2]),c.forEach(g),j.forEach(g),m.forEach(g),this.h()},h(){d(s,"placeholder","Search stories (e.g., Spotify)"),d(s,"class","svelte-13u3fd0"),d(r,"class","svelte-13u3fd0"),d(t,"class","inner column-wide svelte-13u3fd0"),d(e,"id","search"),d(e,"class","svelte-13u3fd0")},m(u,m){P(u,e,m),_(e,t),_(t,s),oe(s,l[1]),_(t,n),_(t,r),_(r,a),_(r,p),_(r,h),f||(i=Le(s,"input",l[5]),f=!0)},p(u,[m]){m&2&&s.value!==u[1]&&oe(s,u[1]),m&1&&o!==(o=u[0].length+"")&&U(a,o),m&4&&U(h,u[2])},i:F,o:F,d(u){u&&g(e),f=!1,i()}}}const Z=3;function Ze(l,e,t){let s,n,r,{highlight:o}=e;const{stories:a}=x("Home"),p=[{prop:"hed",weight:1},{prop:"dek",weight:1},{prop:"tease",weight:1},{prop:"keyword",weight:2}],h=Ne();let f="";const i=b=>p.map(({prop:v})=>{if(typeof b[v]!="string")return{prop:v,tokens:b[v]};const w=Ae(b[v].toLowerCase()).split(/\W/).filter(k=>k.length>=Z);return{prop:v,tokens:w}}),u=({prop:b,tokens:v},y)=>{const T=y.split(/\W/).filter(M=>M.length>=Z).map(M=>M.toLowerCase()),{weight:w}=p.find(M=>M.prop===b),X=T.map(M=>v.includes(M)).filter(M=>M).length*w,K=T.map(M=>v.join(" ").includes(M)).filter(M=>M).length*w*.5;return X+K},m=(b,v)=>{const y=b.map(T=>u(T,v));return Ce(y)},j=b=>{const v=c.map(y=>le(Q({},y),{score:m(y.search,b)})).filter(y=>y.score>0);return v.sort((y,T)=>Re(y.score,T.score)),v},c=a.map(b=>({slug:b.slug,search:i(b)}));function $(){f=this.value,t(1,f)}return l.$$set=b=>{"highlight"in b&&t(0,o=b.highlight)},l.$$.update=()=>{l.$$.dirty&2&&t(3,s=f.toLowerCase().trim()),l.$$.dirty&8&&t(4,n=s.length>=Z?j(s):c),l.$$.dirty&16&&t(0,o=n.map(b=>b.slug)),l.$$.dirty&8&&s.length>=Z&&h("focus"),l.$$.dirty&1&&t(2,r=o.length===1?"y":"ies")},[o,f,r,s,n,$]}class Je extends Y{constructor(e){super();z(this,e,Ze,Xe,B,{highlight:0})}}function pe(l,e,t){const s=l.slice();return s[8]=e[t].tease,s[9]=e[t].url,s[10]=e[t].slug,s[11]=e[t].month,s}function ge(l){let e,t,s,n;return t=new qe({props:{tease:l[8],url:l[9],slug:l[10],month:l[11],collapse:!l[0].includes(l[10])}}),{c(){e=H("li"),O(t.$$.fragment),s=I()},l(r){e=S(r,"LI",{});var o=E(e);W(t.$$.fragment,o),s=L(o),o.forEach(g)},m(r,o){P(r,e,o),q(t,e,null),_(e,s),n=!0},p(r,o){const a={};o&4&&(a.tease=r[8]),o&4&&(a.url=r[9]),o&4&&(a.slug=r[10]),o&4&&(a.month=r[11]),o&5&&(a.collapse=!r[0].includes(r[10])),t.$set(a)},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){A(t.$$.fragment,r),n=!1},d(r){r&&g(e),G(t)}}}function Qe(l){let e,t,s=l[3].storiesHed+"",n,r,o,a,p=l[2],h=[];for(let i=0;i<p.length;i+=1)h[i]=ge(pe(l,p,i));const f=i=>A(h[i],1,1,()=>{h[i]=null});return{c(){e=H("section"),t=H("h2"),n=D(s),r=I(),o=H("ul");for(let i=0;i<h.length;i+=1)h[i].c();this.h()},l(i){e=S(i,"SECTION",{id:!0,class:!0});var u=E(e);t=S(u,"H2",{class:!0});var m=E(t);n=V(m,s),m.forEach(g),r=L(u),o=S(u,"UL",{});var j=E(o);for(let c=0;c<h.length;c+=1)h[c].l(j);j.forEach(g),u.forEach(g),this.h()},h(){d(t,"class","column-wide upper"),d(e,"id","stories"),d(e,"class","svelte-fe1q9d")},m(i,u){P(i,e,u),_(e,t),_(t,n),_(e,r),_(e,o);for(let m=0;m<h.length;m+=1)h[m].m(o,null);l[5](e),a=!0},p(i,[u]){if(u&5){p=i[2];let m;for(m=0;m<p.length;m+=1){const j=pe(i,p,m);h[m]?(h[m].p(j,u),N(h[m],1)):(h[m]=ge(j),h[m].c(),N(h[m],1),h[m].m(o,null))}for(ae(),m=p.length;m<h.length;m+=1)f(m);ie()}},i(i){if(!a){for(let u=0;u<p.length;u+=1)N(h[u]);a=!0}},o(i){h=h.filter(Boolean);for(let u=0;u<h.length;u+=1)A(h[u]);a=!1},d(i){i&&g(e),ue(h,i),l[5](null)}}}function xe(l,e,t){const s=()=>{const{top:i}=a.getBoundingClientRect(),u=window.scrollY+i-64;window.scrollTo(0,u)};let{highlight:n}=e;const{stories:r,copy:o}=x("Home");let a;r.sort((i,u)=>ee(i.date,u.date));let p=r.map(i=>Q({},i));const h=()=>{p.sort((i,u)=>ee(n.indexOf(i.slug),n.indexOf(u.slug))||ee(i.date,u.date)),t(2,p)};function f(i){te[i?"unshift":"push"](()=>{a=i,t(1,a)})}return l.$$set=i=>{"highlight"in i&&t(0,n=i.highlight)},l.$$.update=()=>{l.$$.dirty&1&&h()},[n,a,p,o,s,f]}class et extends Y{constructor(e){super();z(this,e,xe,Qe,B,{jump:4,highlight:0})}get jump(){return this.$$.ctx[4]}}function _e(l){let e,t;return e=new Ke({props:{content:l[0].promo}}),{c(){O(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,n){q(e,s,n),t=!0},p(s,n){const r={};n&1&&(r.content=s[0].promo),e.$set(r)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function tt(l){let e,t,s,n,r,o,a,p,h;e=new Be({});let f=l[0].promo&&_e(l);function i(c){l[6](c)}let u={};l[1]!==void 0&&(u.highlight=l[1]),n=new Je({props:u}),te.push(()=>fe(n,"highlight",i)),n.$on("focus",l[3]);function m(c){l[7](c)}let j={highlight:l[1]};return l[2]!==void 0&&(j.jump=l[2]),a=new et({props:j}),te.push(()=>fe(a,"jump",m)),{c(){O(e.$$.fragment),t=I(),f&&f.c(),s=I(),O(n.$$.fragment),o=I(),O(a.$$.fragment)},l(c){W(e.$$.fragment,c),t=L(c),f&&f.l(c),s=L(c),W(n.$$.fragment,c),o=L(c),W(a.$$.fragment,c)},m(c,$){q(e,c,$),P(c,t,$),f&&f.m(c,$),P(c,s,$),q(n,c,$),P(c,o,$),q(a,c,$),h=!0},p(c,[$]){c[0].promo?f?(f.p(c,$),$&1&&N(f,1)):(f=_e(c),f.c(),N(f,1),f.m(s.parentNode,s)):f&&(ae(),A(f,1,1,()=>{f=null}),ie());const b={};!r&&$&2&&(r=!0,b.highlight=c[1],ce(()=>r=!1)),n.$set(b);const v={};$&2&&(v.highlight=c[1]),!p&&$&4&&(p=!0,v.jump=c[2],ce(()=>p=!1)),a.$set(v)},i(c){h||(N(e.$$.fragment,c),N(f),N(n.$$.fragment,c),N(a.$$.fragment,c),h=!0)},o(c){A(e.$$.fragment,c),A(f),A(n.$$.fragment,c),A(a.$$.fragment,c),h=!1},d(c){G(e,c),c&&g(t),f&&f.d(c),c&&g(s),G(n,c),c&&g(o),G(a,c)}}}function st(l,e,t){let{copy:s}=e,{stories:n}=e,{staff:r}=e,o=n.map(i=>i.slug),a;De("Home",{stories:n,staff:r,copy:s});const p=()=>a();function h(i){o=i,t(1,o)}function f(i){a=i,t(2,a)}return l.$$set=i=>{"copy"in i&&t(0,s=i.copy),"stories"in i&&t(4,n=i.stories),"staff"in i&&t(5,r=i.staff)},[s,o,a,p,n,r,h,f]}class rt extends Y{constructor(e){super();z(this,e,st,tt,B,{copy:0,stories:4,staff:5})}}function de(l,e,t){const s=l.slice();return s[1]=e[t],s}function ve(l){let e,t=l[1]+"",s,n;return{c(){e=H("a"),s=D(t),this.h()},l(r){e=S(r,"A",{href:!0});var o=E(e);s=V(o,t),o.forEach(g),this.h()},h(){d(e,"href",n="/author/"+l[1])},m(r,o){P(r,e,o),_(e,s)},p(r,o){o&1&&t!==(t=r[1]+"")&&U(s,t),o&1&&n!==(n="/author/"+r[1])&&d(e,"href",n)},d(r){r&&g(e)}}}function nt(l){let e,t=l[0],s=[];for(let n=0;n<t.length;n+=1)s[n]=ve(de(l,t,n));return{c(){e=H("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=S(n,"DIV",{class:!0});var r=E(e);for(let o=0;o<s.length;o+=1)s[o].l(r);r.forEach(g),this.h()},h(){d(e,"class","svelte-1l89d97")},m(n,r){P(n,e,r);for(let o=0;o<s.length;o+=1)s[o].m(e,null)},p(n,[r]){if(r&1){t=n[0];let o;for(o=0;o<t.length;o+=1){const a=de(n,t,o);s[o]?s[o].p(a,r):(s[o]=ve(a),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},i:F,o:F,d(n){n&&g(e),ue(s,n)}}}function lt(l,e,t){let{authors:s}=e;return l.$$set=n=>{"authors"in n&&t(0,s=n.authors)},[s]}class ot extends Y{constructor(e){super();z(this,e,lt,nt,B,{authors:0})}}const at="The Pudding",it="The Pudding explains ideas debated in culture with visual essays.",ut="",ft="is a digital publication that <del>explains ideas debated in culture with visual essays</del>",ct="You might have seen our story on [popular], but we\u2019ve also made stuff about [popular], [popular] or [popular].",ht="Some of my favorite projects are about [personal], [personal], and [personal].",mt="So, welcome to The Pudding. Get  cozy, you could be here a while. Explore all of our stories below.",pt="Our Stories",gt=["makes cool shit on the internet","makes awesome stories with data","brings you longform data journalism","creates visual essays with data","makes data fun","is the best internet rabbit hole"];var be={title:at,description:it,promo:ut,tagline:ft,popular:ct,personal:ht,welcome:mt,storiesHed:pt,taglines:gt};function _t(l){let e,t,s,n,r,o;return e=new Oe({props:{copy:be}}),s=new rt({props:{copy:be,stories:l[0],staff:l[1]}}),r=new ot({props:{authors:l[2]}}),{c(){O(e.$$.fragment),t=I(),O(s.$$.fragment),n=I(),O(r.$$.fragment)},l(a){W(e.$$.fragment,a),t=L(a),W(s.$$.fragment,a),n=L(a),W(r.$$.fragment,a)},m(a,p){q(e,a,p),P(a,t,p),q(s,a,p),P(a,n,p),q(r,a,p),o=!0},p(a,[p]){const h={};p&1&&(h.stories=a[0]),p&2&&(h.staff=a[1]),s.$set(h);const f={};p&4&&(f.authors=a[2]),r.$set(f)},i(a){o||(N(e.$$.fragment,a),N(s.$$.fragment,a),N(r.$$.fragment,a),o=!0)},o(a){A(e.$$.fragment,a),A(s.$$.fragment,a),A(r.$$.fragment,a),o=!1},d(a){G(e,a),a&&g(t),G(s,a),a&&g(n),G(r,a)}}}async function Et({fetch:l}){const t=await l("/api/home.json");if(t.ok){const{stories:s,staff:n,authors:r}=await t.json();return{props:{stories:s,staff:n,authors:r}}}return{status:t.status,error:new Error("Could not load data")}}function dt(l,e,t){let{stories:s}=e,{staff:n}=e,{authors:r}=e;return l.$$set=o=>{"stories"in o&&t(0,s=o.stories),"staff"in o&&t(1,n=o.staff),"authors"in o&&t(2,r=o.authors)},[s,n,r]}class jt extends Y{constructor(e){super();z(this,e,dt,_t,B,{stories:0,staff:1,authors:2})}}export{jt as default,Et as load};
