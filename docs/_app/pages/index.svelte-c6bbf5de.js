var Se=Object.defineProperty,Ee=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var ne=(l,e,t)=>e in l?Se(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Q=(l,e)=>{for(var t in e||(e={}))ke.call(e,t)&&ne(l,t,e[t]);if(re)for(var t of re(e))ye.call(e,t)&&ne(l,t,e[t]);return l},le=(l,e)=>Ee(l,Te(e));import{U as Me,S as G,i as U,s as Y,e as H,t as D,c as S,a as E,g as V,d as g,b as d,f as P,H as _,h as B,j as O,k as L,m as q,n as I,G as C,o as W,x as A,u as N,v as z,V as x,A as je,W as Pe,X as Le,I as F,Y as oe,L as Ie,Z as Ae,_ as Ne,$ as Ce,a0 as Re,r as ae,w as ie,K as ue,a1 as ee,O as te,a2 as fe,a3 as ce,y as De}from"../chunks/vendor-868b2ba2.js";import{M as Ve}from"../chunks/Meta-9d4959a9.js";import{H as Oe}from"../chunks/HeroText-39c8150b.js";import{w as qe}from"../chunks/wordmark-0849a013.js";import{S as We}from"../chunks/Story-aa3de859.js";function he({stories:l,category:e,copy:t,filter:s}){const r=l.filter(a=>a.home_text).filter(a=>a.home_pick.includes(s));if(!r.length)return"";Me(r);const n=new RegExp(`\\[${e}\\]`,"g");return t[e].replace(n,()=>{const a=r.pop();return`
    		<a href="https://pudding.cool/${a.url}" rel="external">
    			<span>${a.home_text}</span></a>
				<img src="common/assets/thumbnails/320/${a.slug}.jpg" alt="story thumbnail" />`})}function ze(l){let e,t,s,r,n,o,a,p,h,f,i=l[7].tagline+"",u,m,T,c,$,b,v,M,y;return{c(){e=H("h1"),t=H("div"),s=L(),r=H("div"),n=H("p"),o=H("span"),a=D("The Pudding"),p=L(),h=H("span"),f=new Pe,u=H("span"),m=D(l[0]),T=D("."),c=L(),$=H("span"),b=L(),v=H("span"),M=L(),y=H("span"),this.h()},l(w){e=S(w,"H1",{"aria-label":!0});var k=E(e);t=S(k,"DIV",{class:!0});var se=E(t);se.forEach(g),k.forEach(g),s=I(w),r=S(w,"DIV",{class:!0});var X=E(r);n=S(X,"P",{class:!0});var R=E(n);o=S(R,"SPAN",{class:!0});var J=E(o);a=V(J,"The Pudding"),J.forEach(g),p=I(R),h=S(R,"SPAN",{class:!0});var K=E(h);f=Le(K),u=S(K,"SPAN",{class:!0});var j=E(u);m=V(j,l[0]),T=V(j,"."),j.forEach(g),K.forEach(g),c=I(R),$=S(R,"SPAN",{class:!0});var we=E($);we.forEach(g),b=I(R),v=S(R,"SPAN",{class:!0});var $e=E(v);$e.forEach(g),M=I(R),y=S(R,"SPAN",{class:!0});var He=E(y);He.forEach(g),R.forEach(g),X.forEach(g),this.h()},h(){d(t,"class","wordmark svelte-ulsu3b"),d(e,"aria-label",l[7].title),d(o,"class","sr-only"),f.a=u,d(u,"class","tagline-alt svelte-ulsu3b"),C(u,"is-visible",l[0]),d(h,"class","tagline"),C(h,"is-del",l[0]),d($,"class","popular svelte-ulsu3b"),C($,"is-visible",l[1]),d(v,"class","personal svelte-ulsu3b"),C(v,"is-visible",l[1]),d(y,"class","welcome svelte-ulsu3b"),C(y,"is-visible",l[2]),d(n,"class","svelte-ulsu3b"),d(r,"class","letter svelte-ulsu3b")},m(w,k){P(w,e,k),_(e,t),t.innerHTML=qe,P(w,s,k),P(w,r,k),_(r,n),_(n,o),_(o,a),_(n,p),_(n,h),f.m(i,h),_(h,u),_(u,m),_(u,T),_(n,c),_(n,$),$.innerHTML=l[1],_(n,b),_(n,v),v.innerHTML=l[2],_(n,M),_(n,y),y.innerHTML=l[5]},p(w,k){k&1&&B(m,w[0]),k&1&&C(u,"is-visible",w[0]),k&1&&C(h,"is-del",w[0]),k&2&&($.innerHTML=w[1]),k&2&&C($,"is-visible",w[1]),k&4&&(v.innerHTML=w[2]),k&2&&C(v,"is-visible",w[1]),k&32&&(y.innerHTML=w[5]),k&4&&C(y,"is-visible",w[2])},d(w){w&&g(e),w&&g(s),w&&g(r)}}}function me(l){let e,t,s;return{c(){e=H("a"),t=D(l[3]),this.h()},l(r){e=S(r,"A",{href:!0});var n=E(e);t=V(n,l[3]),n.forEach(g),this.h()},h(){d(e,"href",s="/author/"+l[4])},m(r,n){P(r,e,n),_(e,t)},p(r,n){n&8&&B(t,r[3]),n&16&&s!==(s="/author/"+r[4])&&d(e,"href",s)},d(r){r&&g(e)}}}function Ge(l){let e,t,s,r,n,o,a,p,h;t=new Oe({props:{$$slots:{default:[ze]},$$scope:{ctx:l}}});let f=l[4]&&me(l);return{c(){e=H("section"),O(t.$$.fragment),s=L(),r=H("div"),n=H("p"),f&&f.c(),o=L(),a=H("p"),p=D(l[6]),this.h()},l(i){e=S(i,"SECTION",{id:!0,class:!0});var u=E(e);q(t.$$.fragment,u),s=I(u),r=S(u,"DIV",{class:!0});var m=E(r);n=S(m,"P",{class:!0});var T=E(n);f&&f.l(T),T.forEach(g),o=I(m),a=S(m,"P",{class:!0});var c=E(a);p=V(c,l[6]),c.forEach(g),m.forEach(g),u.forEach(g),this.h()},h(){d(n,"class","name"),d(a,"class","position"),d(r,"class","signature svelte-ulsu3b"),C(r,"is-visible",l[2]),d(e,"id","intro"),d(e,"class","column-wide")},m(i,u){P(i,e,u),W(t,e,null),_(e,s),_(e,r),_(r,n),f&&f.m(n,null),_(r,o),_(r,a),_(a,p),h=!0},p(i,[u]){const m={};u&16423&&(m.$$scope={dirty:u,ctx:i}),t.$set(m),i[4]?f?f.p(i,u):(f=me(i),f.c(),f.m(n,null)):f&&(f.d(1),f=null),(!h||u&64)&&B(p,i[6]),u&4&&C(r,"is-visible",i[2])},i(i){h||(A(t.$$.fragment,i),h=!0)},o(i){N(t.$$.fragment,i),h=!1},d(i){i&&g(e),z(t),f&&f.d()}}}function Ue(l,e,t){const{stories:s,staff:r,copy:n}=x("Home");let o="",a="",p="",h="",f="",i="",u="";const m=()=>{t(1,a=he({stories:s,copy:n,category:"popular",filter:"popular"}))},T=()=>{const b=Math.floor(Math.random()*r.length),{id:v,name:M,slug:y}=r[b],w=s.filter(k=>!a.includes(k.url));t(2,p=he({stories:w,copy:n,category:"personal",filter:v})),t(3,h=M),t(4,f=y)},c=()=>{const b=Math.floor(Math.random()*n.altTaglines.length);t(0,o=` ${n.altTaglines[b]}`)},$=()=>{!p||(t(5,i=n.welcome),t(6,u="Pudding team member"))};return je(()=>{c(),m(),T(),$()}),[o,a,p,h,f,i,u,n]}class Ye extends G{constructor(e){super();U(this,e,Ue,Ge,Y,{})}}function Be(l){let e;return{c(){e=H("div"),this.h()},l(t){e=S(t,"DIV",{class:!0});var s=E(e);s.forEach(g),this.h()},h(){d(e,"class","svelte-het5lh")},m(t,s){P(t,e,s),e.innerHTML=l[0]},p(t,[s]){s&1&&(e.innerHTML=t[0])},i:F,o:F,d(t){t&&g(e)}}}function Fe(l,e,t){let{content:s}=e;return l.$$set=r=>{"content"in r&&t(0,s=r.content)},[s]}class Ke extends G{constructor(e){super();U(this,e,Fe,Be,Y,{content:0})}}function Xe(l){let e,t,s,r,n,o=l[0].length+"",a,p,h,f,i;return{c(){e=H("div"),t=H("div"),s=H("input"),r=L(),n=H("p"),a=D(o),p=D(" stor"),h=D(l[2]),this.h()},l(u){e=S(u,"DIV",{id:!0,class:!0});var m=E(e);t=S(m,"DIV",{class:!0});var T=E(t);s=S(T,"INPUT",{placeholder:!0,class:!0}),r=I(T),n=S(T,"P",{class:!0});var c=E(n);a=V(c,o),p=V(c," stor"),h=V(c,l[2]),c.forEach(g),T.forEach(g),m.forEach(g),this.h()},h(){d(s,"placeholder","Search stories (e.g., Spotify)"),d(s,"class","svelte-131yach"),d(n,"class","svelte-131yach"),d(t,"class","inner column-wide svelte-131yach"),d(e,"id","search"),d(e,"class","svelte-131yach")},m(u,m){P(u,e,m),_(e,t),_(t,s),oe(s,l[1]),_(t,r),_(t,n),_(n,a),_(n,p),_(n,h),f||(i=Ie(s,"input",l[5]),f=!0)},p(u,[m]){m&2&&s.value!==u[1]&&oe(s,u[1]),m&1&&o!==(o=u[0].length+"")&&B(a,o),m&4&&B(h,u[2])},i:F,o:F,d(u){u&&g(e),f=!1,i()}}}const Z=3;function Ze(l,e,t){let s,r,n,{highlight:o}=e;const{stories:a}=x("Home"),p=[{prop:"hed",weight:1},{prop:"dek",weight:1},{prop:"tease",weight:1},{prop:"keyword",weight:2}],h=Ae();let f="";const i=b=>p.map(({prop:v})=>{if(typeof b[v]!="string")return{prop:v,tokens:b[v]};const w=Ne(b[v].toLowerCase()).split(/\W/).filter(k=>k.length>=Z);return{prop:v,tokens:w}}),u=({prop:b,tokens:v},M)=>{const y=M.split(/\W/).filter(j=>j.length>=Z).map(j=>j.toLowerCase()),{weight:w}=p.find(j=>j.prop===b),X=y.map(j=>v.includes(j)).filter(j=>j).length*w,K=y.map(j=>v.join(" ").includes(j)).filter(j=>j).length*w*.5;return X+K},m=(b,v)=>{const M=b.map(y=>u(y,v));return Ce(M)},T=b=>{const v=c.map(M=>le(Q({},M),{score:m(M.search,b)})).filter(M=>M.score>0);return v.sort((M,y)=>Re(M.score,y.score)),v},c=a.map(b=>({slug:b.slug,search:i(b)}));function $(){f=this.value,t(1,f)}return l.$$set=b=>{"highlight"in b&&t(0,o=b.highlight)},l.$$.update=()=>{l.$$.dirty&2&&t(3,s=f.toLowerCase().trim()),l.$$.dirty&8&&t(4,r=s.length>=Z?T(s):c),l.$$.dirty&16&&t(0,o=r.map(b=>b.slug)),l.$$.dirty&8&&s.length>=Z&&h("focus"),l.$$.dirty&1&&t(2,n=o.length===1?"y":"ies")},[o,f,n,s,r,$]}class Je extends G{constructor(e){super();U(this,e,Ze,Xe,Y,{highlight:0})}}function pe(l,e,t){const s=l.slice();return s[8]=e[t].tease,s[9]=e[t].url,s[10]=e[t].slug,s}function ge(l){let e,t,s,r;return t=new We({props:{tease:l[8],url:l[9],slug:l[10],collapse:!l[0].includes(l[10])}}),{c(){e=H("li"),O(t.$$.fragment),s=L()},l(n){e=S(n,"LI",{});var o=E(e);q(t.$$.fragment,o),s=I(o),o.forEach(g)},m(n,o){P(n,e,o),W(t,e,null),_(e,s),r=!0},p(n,o){const a={};o&4&&(a.tease=n[8]),o&4&&(a.url=n[9]),o&4&&(a.slug=n[10]),o&5&&(a.collapse=!n[0].includes(n[10])),t.$set(a)},i(n){r||(A(t.$$.fragment,n),r=!0)},o(n){N(t.$$.fragment,n),r=!1},d(n){n&&g(e),z(t)}}}function Qe(l){let e,t,s=l[3].storiesHed+"",r,n,o,a,p=l[2],h=[];for(let i=0;i<p.length;i+=1)h[i]=ge(pe(l,p,i));const f=i=>N(h[i],1,1,()=>{h[i]=null});return{c(){e=H("section"),t=H("h2"),r=D(s),n=L(),o=H("ul");for(let i=0;i<h.length;i+=1)h[i].c();this.h()},l(i){e=S(i,"SECTION",{id:!0,class:!0});var u=E(e);t=S(u,"H2",{class:!0});var m=E(t);r=V(m,s),m.forEach(g),n=I(u),o=S(u,"UL",{});var T=E(o);for(let c=0;c<h.length;c+=1)h[c].l(T);T.forEach(g),u.forEach(g),this.h()},h(){d(t,"class","column-wide upper svelte-1wqvgrz"),d(e,"id","stories"),d(e,"class","svelte-1wqvgrz")},m(i,u){P(i,e,u),_(e,t),_(t,r),_(e,n),_(e,o);for(let m=0;m<h.length;m+=1)h[m].m(o,null);l[5](e),a=!0},p(i,[u]){if(u&5){p=i[2];let m;for(m=0;m<p.length;m+=1){const T=pe(i,p,m);h[m]?(h[m].p(T,u),A(h[m],1)):(h[m]=ge(T),h[m].c(),A(h[m],1),h[m].m(o,null))}for(ae(),m=p.length;m<h.length;m+=1)f(m);ie()}},i(i){if(!a){for(let u=0;u<p.length;u+=1)A(h[u]);a=!0}},o(i){h=h.filter(Boolean);for(let u=0;u<h.length;u+=1)N(h[u]);a=!1},d(i){i&&g(e),ue(h,i),l[5](null)}}}function xe(l,e,t){const s=()=>{const{top:i}=a.getBoundingClientRect(),u=window.scrollY+i-64;window.scrollTo(0,u)};let{highlight:r}=e;const{stories:n,copy:o}=x("Home");let a;n.sort((i,u)=>ee(i.date,u.date));let p=n.map(i=>Q({},i));const h=()=>{p.sort((i,u)=>ee(r.indexOf(i.slug),r.indexOf(u.slug))||ee(i.date,u.date)),t(2,p)};function f(i){te[i?"unshift":"push"](()=>{a=i,t(1,a)})}return l.$$set=i=>{"highlight"in i&&t(0,r=i.highlight)},l.$$.update=()=>{l.$$.dirty&1&&h()},[r,a,p,o,s,f]}class et extends G{constructor(e){super();U(this,e,xe,Qe,Y,{jump:4,highlight:0})}get jump(){return this.$$.ctx[4]}}function _e(l){let e,t;return e=new Ke({props:{content:l[0].promo}}),{c(){O(e.$$.fragment)},l(s){q(e.$$.fragment,s)},m(s,r){W(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.content=s[0].promo),e.$set(n)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function tt(l){let e,t,s,r,n,o,a,p,h;e=new Ye({});let f=l[0].promo&&_e(l);function i(c){l[6](c)}let u={};l[1]!==void 0&&(u.highlight=l[1]),r=new Je({props:u}),te.push(()=>fe(r,"highlight",i)),r.$on("focus",l[3]);function m(c){l[7](c)}let T={highlight:l[1]};return l[2]!==void 0&&(T.jump=l[2]),a=new et({props:T}),te.push(()=>fe(a,"jump",m)),{c(){O(e.$$.fragment),t=L(),f&&f.c(),s=L(),O(r.$$.fragment),o=L(),O(a.$$.fragment)},l(c){q(e.$$.fragment,c),t=I(c),f&&f.l(c),s=I(c),q(r.$$.fragment,c),o=I(c),q(a.$$.fragment,c)},m(c,$){W(e,c,$),P(c,t,$),f&&f.m(c,$),P(c,s,$),W(r,c,$),P(c,o,$),W(a,c,$),h=!0},p(c,[$]){c[0].promo?f?(f.p(c,$),$&1&&A(f,1)):(f=_e(c),f.c(),A(f,1),f.m(s.parentNode,s)):f&&(ae(),N(f,1,1,()=>{f=null}),ie());const b={};!n&&$&2&&(n=!0,b.highlight=c[1],ce(()=>n=!1)),r.$set(b);const v={};$&2&&(v.highlight=c[1]),!p&&$&4&&(p=!0,v.jump=c[2],ce(()=>p=!1)),a.$set(v)},i(c){h||(A(e.$$.fragment,c),A(f),A(r.$$.fragment,c),A(a.$$.fragment,c),h=!0)},o(c){N(e.$$.fragment,c),N(f),N(r.$$.fragment,c),N(a.$$.fragment,c),h=!1},d(c){z(e,c),c&&g(t),f&&f.d(c),c&&g(s),z(r,c),c&&g(o),z(a,c)}}}function st(l,e,t){let{copy:s}=e,{stories:r}=e,{staff:n}=e,o=r.map(i=>i.slug),a;De("Home",{stories:r,staff:n,copy:s});const p=()=>a();function h(i){o=i,t(1,o)}function f(i){a=i,t(2,a)}return l.$$set=i=>{"copy"in i&&t(0,s=i.copy),"stories"in i&&t(4,r=i.stories),"staff"in i&&t(5,n=i.staff)},[s,o,a,p,r,n,h,f]}class rt extends G{constructor(e){super();U(this,e,st,tt,Y,{copy:0,stories:4,staff:5})}}function de(l,e,t){const s=l.slice();return s[1]=e[t],s}function ve(l){let e,t=l[1]+"",s,r;return{c(){e=H("a"),s=D(t),this.h()},l(n){e=S(n,"A",{href:!0});var o=E(e);s=V(o,t),o.forEach(g),this.h()},h(){d(e,"href",r="/author/"+l[1])},m(n,o){P(n,e,o),_(e,s)},p(n,o){o&1&&t!==(t=n[1]+"")&&B(s,t),o&1&&r!==(r="/author/"+n[1])&&d(e,"href",r)},d(n){n&&g(e)}}}function nt(l){let e,t=l[0],s=[];for(let r=0;r<t.length;r+=1)s[r]=ve(de(l,t,r));return{c(){e=H("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"DIV",{class:!0});var n=E(e);for(let o=0;o<s.length;o+=1)s[o].l(n);n.forEach(g),this.h()},h(){d(e,"class","svelte-1l89d97")},m(r,n){P(r,e,n);for(let o=0;o<s.length;o+=1)s[o].m(e,null)},p(r,[n]){if(n&1){t=r[0];let o;for(o=0;o<t.length;o+=1){const a=de(r,t,o);s[o]?s[o].p(a,n):(s[o]=ve(a),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},i:F,o:F,d(r){r&&g(e),ue(s,r)}}}function lt(l,e,t){let{authors:s}=e;return l.$$set=r=>{"authors"in r&&t(0,s=r.authors)},[s]}class ot extends G{constructor(e){super();U(this,e,lt,nt,Y,{authors:0})}}const at="The Pudding",it="",ut="is a digital publication that <del>explains ideas debated in culture with visual essays</del>",ft="You might have seen our story on [popular], but we\u2019ve also made stuff about [popular] [popular] or [popular].",ct="Some of my favorite projects are about [personal], [personal], and [personal].",ht="So, welcome to The Pudding. Get  cozy, you could be here a while. Explore all of our stories below.",mt="Our Stories",pt=["makes cool shit on the internet","makes awesome stories with data","brings you longform data journalism","creates visual essays with data","makes data fun","is the best internet rabbit hole"];var be={title:at,promo:it,tagline:ut,popular:ft,personal:ct,welcome:ht,storiesHed:mt,altTaglines:pt};function gt(l){let e,t,s,r,n,o;return e=new Ve({props:{copy:be}}),s=new rt({props:{copy:be,stories:l[0],staff:l[1]}}),n=new ot({props:{authors:l[2]}}),{c(){O(e.$$.fragment),t=L(),O(s.$$.fragment),r=L(),O(n.$$.fragment)},l(a){q(e.$$.fragment,a),t=I(a),q(s.$$.fragment,a),r=I(a),q(n.$$.fragment,a)},m(a,p){W(e,a,p),P(a,t,p),W(s,a,p),P(a,r,p),W(n,a,p),o=!0},p(a,[p]){const h={};p&1&&(h.stories=a[0]),p&2&&(h.staff=a[1]),s.$set(h);const f={};p&4&&(f.authors=a[2]),n.$set(f)},i(a){o||(A(e.$$.fragment,a),A(s.$$.fragment,a),A(n.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),N(s.$$.fragment,a),N(n.$$.fragment,a),o=!1},d(a){z(e,a),a&&g(t),z(s,a),a&&g(r),z(n,a)}}}async function St({fetch:l}){const t=await l("/api/home.json");if(t.ok){const{stories:s,staff:r,authors:n}=await t.json();return{props:{stories:s,staff:r,authors:n}}}return{status:t.status,error:new Error("Could not load data")}}function _t(l,e,t){let{stories:s}=e,{staff:r}=e,{authors:n}=e;return l.$$set=o=>{"stories"in o&&t(0,s=o.stories),"staff"in o&&t(1,r=o.staff),"authors"in o&&t(2,n=o.authors)},[s,r,n]}class Et extends G{constructor(e){super();U(this,e,_t,gt,Y,{stories:0,staff:1,authors:2})}}export{Et as default,St as load};
