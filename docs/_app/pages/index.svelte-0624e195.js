var Ae=Object.defineProperty,Le=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;var be=(r,e,t)=>e in r?Ae(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pe=(r,e)=>{for(var t in e||(e={}))Ie.call(e,t)&&be(r,t,e[t]);if(ve)for(var t of ve(e))Re.call(e,t)&&be(r,t,e[t]);return r},we=(r,e)=>Le(r,Ne(e));import{U as Ce,S as re,i as le,s as ne,e as w,k as L,t as V,V as Oe,c as E,a as H,d as u,n as N,g as W,W as De,b as S,G as B,f as M,H as m,h as me,I as oe,X as _e,A as Ve,Y as Ee,L as We,Z as qe,_ as Ge,$ as Ye,a0 as Ue,j as x,m as ee,o as te,x as q,u as F,v as se,r as Se,w as He,K as ze,a1 as ge,O as de,a2 as $e,a3 as Te,y as Be}from"../chunks/vendor-2a31199a.js";import{M as Fe}from"../chunks/Meta-ea4f944b.js";import{w as Je}from"../chunks/wordmark-0849a013.js";import{S as Qe}from"../chunks/Story-b6f82df5.js";function ke({stories:r,copy:e,category:t,filterFunction:s}){s=s||(()=>!0);const o=`home_${t}`,n=r.filter(v=>v[o]).filter(s);if(!n.length)return"";Ce(n);const a=new RegExp(`\\[${t}\\]`,"g");return e[t].replace(a,()=>{const v=n.pop();return`
    		<a href="https://pudding.cool/${v.url}" rel="external">
    			<span>${v[o]}</span>
    			<img src="common/assets/thumbnails/320/${v.slug}.jpg" alt="" /></a>`})}function Ke(r){let e,t,s,o,n,a,i,v,$,f,c,h=r[6].tagline+"",p,_,I,g,b,j,T,C,R,G,O,Y,D,J,k,U;return{c(){e=w("section"),t=w("h1"),s=w("div"),o=L(),n=w("div"),a=w("p"),i=w("span"),v=V("The Pudding"),$=L(),f=w("span"),c=new Oe,p=w("span"),_=V(r[0]),I=V("."),g=L(),b=w("span"),j=L(),T=w("span"),C=L(),R=w("span"),G=L(),O=w("p"),Y=w("span"),D=V(r[3]),J=L(),k=w("span"),U=V(r[5]),this.h()},l(A){e=E(A,"SECTION",{id:!0,class:!0});var y=H(e);t=E(y,"H1",{"aria-label":!0});var P=H(t);s=E(P,"DIV",{class:!0});var he=H(s);he.forEach(u),P.forEach(u),o=N(y),n=E(y,"DIV",{class:!0});var K=H(n);a=E(K,"P",{});var z=H(a);i=E(z,"SPAN",{class:!0});var ae=H(i);v=W(ae,"The Pudding"),ae.forEach(u),$=N(z),f=E(z,"SPAN",{class:!0});var l=H(f);c=De(l),p=E(l,"SPAN",{class:!0});var d=H(p);_=W(d,r[0]),I=W(d,"."),d.forEach(u),l.forEach(u),g=N(z),b=E(z,"SPAN",{class:!0});var X=H(b);X.forEach(u),j=N(z),T=E(z,"SPAN",{class:!0});var Q=H(T);Q.forEach(u),C=N(z),R=E(z,"SPAN",{class:!0});var fe=H(R);fe.forEach(u),z.forEach(u),G=N(K),O=E(K,"P",{class:!0});var Z=H(O);Y=E(Z,"SPAN",{class:!0});var ie=H(Y);D=W(ie,r[3]),ie.forEach(u),J=N(Z),k=E(Z,"SPAN",{class:!0});var ue=H(k);U=W(ue,r[5]),ue.forEach(u),Z.forEach(u),K.forEach(u),y.forEach(u),this.h()},h(){S(s,"class","wordmark svelte-1hf2bs0"),S(t,"aria-label",r[6].title),S(i,"class","sr-only"),c.a=p,S(p,"class","tagline-alt svelte-1hf2bs0"),B(p,"is-visible",r[0]),S(f,"class","tagline"),B(f,"is-del",r[0]),S(b,"class","popular svelte-1hf2bs0"),B(b,"is-visible",r[1]),S(T,"class","personal svelte-1hf2bs0"),B(T,"is-visible",r[1]),S(R,"class","welcome svelte-1hf2bs0"),B(R,"is-visible",r[2]),S(Y,"class","name svelte-1hf2bs0"),S(k,"class","position svelte-1hf2bs0"),S(O,"class","signature svelte-1hf2bs0"),B(O,"is-visible",r[2]),S(n,"class","letter svelte-1hf2bs0"),S(e,"id","intro"),S(e,"class","svelte-1hf2bs0")},m(A,y){M(A,e,y),m(e,t),m(t,s),s.innerHTML=Je,m(e,o),m(e,n),m(n,a),m(a,i),m(i,v),m(a,$),m(a,f),c.m(h,f),m(f,p),m(p,_),m(p,I),m(a,g),m(a,b),b.innerHTML=r[1],m(a,j),m(a,T),T.innerHTML=r[2],m(a,C),m(a,R),R.innerHTML=r[4],m(n,G),m(n,O),m(O,Y),m(Y,D),m(O,J),m(O,k),m(k,U)},p(A,[y]){y&1&&me(_,A[0]),y&1&&B(p,"is-visible",A[0]),y&1&&B(f,"is-del",A[0]),y&2&&(b.innerHTML=A[1]),y&2&&B(b,"is-visible",A[1]),y&4&&(T.innerHTML=A[2]),y&2&&B(T,"is-visible",A[1]),y&16&&(R.innerHTML=A[4]),y&4&&B(R,"is-visible",A[2]),y&8&&me(D,A[3]),y&32&&me(U,A[5]),y&4&&B(O,"is-visible",A[2])},i:oe,o:oe,d(A){A&&u(e)}}}function Xe(r,e,t){const{stories:s,staff:o,copy:n}=_e("Home");let a="",i="",v="",$="",f="",c="";const h=()=>{t(1,i=ke({stories:s,copy:n,category:"popular"}))},p=()=>{Math.floor(Math.random()*o.length);const{id:g,name:b}=o[1],j=C=>C.personal_pick.includes(g),T=s.filter(C=>!i.includes(C.url));t(2,v=ke({stories:T,copy:n,category:"personal",filterFunction:j})),t(3,$=b)},_=()=>{const g=Math.floor(Math.random()*n.altTaglines.length);t(0,a=` ${n.altTaglines[g]}`)},I=()=>{!v||(t(4,f=n.welcome),t(5,c="Pudding team member"))};return Ve(()=>{_(),h(),p(),I()}),[a,i,v,$,f,c,n]}class Ze extends re{constructor(e){super();le(this,e,Xe,Ke,ne,{})}}function xe(r){let e;return{c(){e=w("div"),this.h()},l(t){e=E(t,"DIV",{class:!0});var s=H(e);s.forEach(u),this.h()},h(){S(e,"class","svelte-het5lh")},m(t,s){M(t,e,s),e.innerHTML=r[0]},p(t,[s]){s&1&&(e.innerHTML=t[0])},i:oe,o:oe,d(t){t&&u(e)}}}function et(r,e,t){let{content:s}=e;return r.$$set=o=>{"content"in o&&t(0,s=o.content)},[s]}class tt extends re{constructor(e){super();le(this,e,et,xe,ne,{content:0})}}function st(r){let e,t,s,o,n;return{c(){e=w("div"),t=w("div"),s=w("input"),this.h()},l(a){e=E(a,"DIV",{id:!0,class:!0});var i=H(e);t=E(i,"DIV",{class:!0});var v=H(t);s=E(v,"INPUT",{placeholder:!0,class:!0}),v.forEach(u),i.forEach(u),this.h()},h(){S(s,"placeholder","Search stories (e.g., Spotify)"),S(s,"class","svelte-4upkrk"),S(t,"class","inner svelte-4upkrk"),S(e,"id","search"),S(e,"class","svelte-4upkrk")},m(a,i){M(a,e,i),m(e,t),m(t,s),Ee(s,r[0]),o||(n=We(s,"input",r[4]),o=!0)},p(a,[i]){i&1&&s.value!==a[0]&&Ee(s,a[0])},i:oe,o:oe,d(a){a&&u(e),o=!1,n()}}}const ce=3;function rt(r,e,t){let s,o,{highlight:n}=e;const{stories:a}=_e("Home"),i=[{prop:"hed",weight:1},{prop:"dek",weight:1},{prop:"tease",weight:1},{prop:"keyword",weight:2}],v=qe();let $="";const f=g=>i.map(({prop:b})=>{if(typeof g[b]!="string")return{prop:b,tokens:g[b]};const C=Ge(g[b].toLowerCase()).split(/\W/).filter(R=>R.length>=ce);return{prop:b,tokens:C}}),c=({prop:g,tokens:b},j)=>{const T=j.split(/\W/).filter(k=>k.length>=ce).map(k=>k.toLowerCase()),{weight:C}=i.find(k=>k.prop===g),O=T.map(k=>b.includes(k)).filter(k=>k).length*C,J=T.map(k=>b.join(" ").includes(k)).filter(k=>k).length*C*.5;return O+J},h=(g,b)=>{const j=g.map(T=>c(T,b));return Ye(j)},p=g=>{const b=_.map(j=>we(pe({},j),{score:h(j.search,g)})).filter(j=>j.score>0);return b.sort((j,T)=>Ue(j.score,T.score)),b},_=a.map(g=>({slug:g.slug,search:f(g)}));function I(){$=this.value,t(0,$)}return r.$$set=g=>{"highlight"in g&&t(1,n=g.highlight)},r.$$.update=()=>{r.$$.dirty&1&&t(2,s=$.toLowerCase().trim()),r.$$.dirty&4&&t(3,o=s.length>=ce?p(s):_),r.$$.dirty&8&&t(1,n=o.map(g=>g.slug)),r.$$.dirty&4&&s.length>=ce&&v("focus")},[$,n,s,o,I]}class lt extends re{constructor(e){super();le(this,e,rt,st,ne,{highlight:1})}}function ye(r,e,t){const s=r.slice();return s[8]=e[t].tease,s[9]=e[t].url,s[10]=e[t].slug,s}function Pe(r){let e,t,s,o;return t=new Qe({props:{tease:r[8],url:r[9],slug:r[10],collapse:!r[0].includes(r[10])}}),{c(){e=w("li"),x(t.$$.fragment),s=L()},l(n){e=E(n,"LI",{});var a=H(e);ee(t.$$.fragment,a),s=N(a),a.forEach(u)},m(n,a){M(n,e,a),te(t,e,null),m(e,s),o=!0},p(n,a){const i={};a&4&&(i.tease=n[8]),a&4&&(i.url=n[9]),a&4&&(i.slug=n[10]),a&5&&(i.collapse=!n[0].includes(n[10])),t.$set(i)},i(n){o||(q(t.$$.fragment,n),o=!0)},o(n){F(t.$$.fragment,n),o=!1},d(n){n&&u(e),se(t)}}}function nt(r){let e,t,s,o=r[3].storiesHed+"",n,a,i,v,$=r[2],f=[];for(let h=0;h<$.length;h+=1)f[h]=Pe(ye(r,$,h));const c=h=>F(f[h],1,1,()=>{f[h]=null});return{c(){e=w("section"),t=w("h2"),s=w("strong"),n=V(o),a=L(),i=w("ul");for(let h=0;h<f.length;h+=1)f[h].c();this.h()},l(h){e=E(h,"SECTION",{id:!0,class:!0});var p=H(e);t=E(p,"H2",{class:!0});var _=H(t);s=E(_,"STRONG",{});var I=H(s);n=W(I,o),I.forEach(u),_.forEach(u),a=N(p),i=E(p,"UL",{});var g=H(i);for(let b=0;b<f.length;b+=1)f[b].l(g);g.forEach(u),p.forEach(u),this.h()},h(){S(t,"class","svelte-11vp7g5"),S(e,"id","stories"),S(e,"class","svelte-11vp7g5")},m(h,p){M(h,e,p),m(e,t),m(t,s),m(s,n),m(e,a),m(e,i);for(let _=0;_<f.length;_+=1)f[_].m(i,null);r[5](e),v=!0},p(h,[p]){if(p&5){$=h[2];let _;for(_=0;_<$.length;_+=1){const I=ye(h,$,_);f[_]?(f[_].p(I,p),q(f[_],1)):(f[_]=Pe(I),f[_].c(),q(f[_],1),f[_].m(i,null))}for(Se(),_=$.length;_<f.length;_+=1)c(_);He()}},i(h){if(!v){for(let p=0;p<$.length;p+=1)q(f[p]);v=!0}},o(h){f=f.filter(Boolean);for(let p=0;p<f.length;p+=1)F(f[p]);v=!1},d(h){h&&u(e),ze(f,h),r[5](null)}}}function ot(r,e,t){const s=()=>{const{top:c}=i.getBoundingClientRect(),h=window.scrollY+c-64;window.scrollTo(0,h)};let{highlight:o}=e;const{stories:n,copy:a}=_e("Home");let i;n.sort((c,h)=>ge(c.date,h.date));let v=n.map(c=>pe({},c));const $=()=>{v.sort((c,h)=>ge(o.indexOf(c.slug),o.indexOf(h.slug))||ge(c.date,h.date)),t(2,v)};function f(c){de[c?"unshift":"push"](()=>{i=c,t(1,i)})}return r.$$set=c=>{"highlight"in c&&t(0,o=c.highlight)},r.$$.update=()=>{r.$$.dirty&1&&$()},[o,i,v,a,s,f]}class at extends re{constructor(e){super();le(this,e,ot,nt,ne,{jump:4,highlight:0})}get jump(){return this.$$.ctx[4]}}function Me(r){let e,t;return e=new tt({props:{content:r[0].promo}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,o){te(e,s,o),t=!0},p(s,o){const n={};o&1&&(n.content=s[0].promo),e.$set(n)},i(s){t||(q(e.$$.fragment,s),t=!0)},o(s){F(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function it(r){let e,t,s,o,n,a,i,v,$,f,c,h,p,_,I,g,b,j,T,C,R,G,O,Y,D,J,k,U,A,y;e=new Ze({});let P=r[0].promo&&Me(r);function he(l){r[6](l)}let K={};r[1]!==void 0&&(K.highlight=r[1]),o=new lt({props:K}),de.push(()=>$e(o,"highlight",he)),o.$on("focus",r[3]);function z(l){r[7](l)}let ae={highlight:r[1]};return r[2]!==void 0&&(ae.jump=r[2]),i=new at({props:ae}),de.push(()=>$e(i,"jump",z)),{c(){x(e.$$.fragment),t=L(),P&&P.c(),s=L(),x(o.$$.fragment),a=L(),x(i.$$.fragment),$=L(),f=w("a"),c=V("About"),h=L(),p=w("a"),_=V("Pitch"),I=L(),g=w("a"),b=V("Privacy"),j=L(),T=w("a"),C=V("FAQ"),R=L(),G=w("a"),O=V("Resources"),Y=L(),D=w("a"),J=V("Russell"),k=L(),U=w("a"),A=V("Jan"),this.h()},l(l){ee(e.$$.fragment,l),t=N(l),P&&P.l(l),s=N(l),ee(o.$$.fragment,l),a=N(l),ee(i.$$.fragment,l),$=N(l),f=E(l,"A",{href:!0});var d=H(f);c=W(d,"About"),d.forEach(u),h=N(l),p=E(l,"A",{href:!0});var X=H(p);_=W(X,"Pitch"),X.forEach(u),I=N(l),g=E(l,"A",{href:!0});var Q=H(g);b=W(Q,"Privacy"),Q.forEach(u),j=N(l),T=E(l,"A",{href:!0});var fe=H(T);C=W(fe,"FAQ"),fe.forEach(u),R=N(l),G=E(l,"A",{href:!0});var Z=H(G);O=W(Z,"Resources"),Z.forEach(u),Y=N(l),D=E(l,"A",{href:!0});var ie=H(D);J=W(ie,"Russell"),ie.forEach(u),k=N(l),U=E(l,"A",{href:!0});var ue=H(U);A=W(ue,"Jan"),ue.forEach(u),this.h()},h(){S(f,"href","about"),S(p,"href","pitch"),S(g,"href","privacy"),S(T,"href","faq"),S(G,"href","resources"),S(D,"href","author/russell-goldenberg"),S(U,"href","author/jan-diehm")},m(l,d){te(e,l,d),M(l,t,d),P&&P.m(l,d),M(l,s,d),te(o,l,d),M(l,a,d),te(i,l,d),M(l,$,d),M(l,f,d),m(f,c),M(l,h,d),M(l,p,d),m(p,_),M(l,I,d),M(l,g,d),m(g,b),M(l,j,d),M(l,T,d),m(T,C),M(l,R,d),M(l,G,d),m(G,O),M(l,Y,d),M(l,D,d),m(D,J),M(l,k,d),M(l,U,d),m(U,A),y=!0},p(l,[d]){l[0].promo?P?(P.p(l,d),d&1&&q(P,1)):(P=Me(l),P.c(),q(P,1),P.m(s.parentNode,s)):P&&(Se(),F(P,1,1,()=>{P=null}),He());const X={};!n&&d&2&&(n=!0,X.highlight=l[1],Te(()=>n=!1)),o.$set(X);const Q={};d&2&&(Q.highlight=l[1]),!v&&d&4&&(v=!0,Q.jump=l[2],Te(()=>v=!1)),i.$set(Q)},i(l){y||(q(e.$$.fragment,l),q(P),q(o.$$.fragment,l),q(i.$$.fragment,l),y=!0)},o(l){F(e.$$.fragment,l),F(P),F(o.$$.fragment,l),F(i.$$.fragment,l),y=!1},d(l){se(e,l),l&&u(t),P&&P.d(l),l&&u(s),se(o,l),l&&u(a),se(i,l),l&&u($),l&&u(f),l&&u(h),l&&u(p),l&&u(I),l&&u(g),l&&u(j),l&&u(T),l&&u(R),l&&u(G),l&&u(Y),l&&u(D),l&&u(k),l&&u(U)}}}function ut(r,e,t){let{copy:s}=e,{stories:o}=e,{staff:n}=e,a=o.map(c=>c.slug),i;Be("Home",{stories:o,staff:n,copy:s});const v=()=>i();function $(c){a=c,t(1,a)}function f(c){i=c,t(2,i)}return r.$$set=c=>{"copy"in c&&t(0,s=c.copy),"stories"in c&&t(4,o=c.stories),"staff"in c&&t(5,n=c.staff)},[s,a,i,v,o,n,$,f]}class ft extends re{constructor(e){super();le(this,e,ut,it,ne,{copy:0,stories:4,staff:5})}}const ct="The Pudding",ht="",pt="is a digital publication that <del>explains ideas debated in culture with visual essays</del>",mt="You might have seen our story on [popular], but we\u2019ve also made stuff about [popular], [popular], and [popular].",_t="Some of my favorite projects are about [personal], [personal], [personal], and [personal].",gt="So, welcome to The Pudding. Get  cozy. You could be here a while. Explore all our stories below.",dt="Our Stories",vt=["makes cool shit on the internet","makes awesome stories with data","crafts data into stories about culture","brings you longform data journalism","creates visual essays with data"];var je={title:ct,promo:ht,tagline:pt,popular:mt,personal:_t,welcome:gt,storiesHed:dt,altTaglines:vt};function bt(r){let e,t,s,o;return e=new Fe({props:{copy:je}}),s=new ft({props:{copy:je,stories:r[0],staff:r[1]}}),{c(){x(e.$$.fragment),t=L(),x(s.$$.fragment)},l(n){ee(e.$$.fragment,n),t=N(n),ee(s.$$.fragment,n)},m(n,a){te(e,n,a),M(n,t,a),te(s,n,a),o=!0},p(n,[a]){const i={};a&1&&(i.stories=n[0]),a&2&&(i.staff=n[1]),s.$set(i)},i(n){o||(q(e.$$.fragment,n),q(s.$$.fragment,n),o=!0)},o(n){F(e.$$.fragment,n),F(s.$$.fragment,n),o=!1},d(n){se(e,n),n&&u(t),se(s,n)}}}async function kt({fetch:r}){const t=await r("/api/home.json");if(t.ok){const{stories:s,staff:o}=await t.json();return{props:{stories:s,staff:o}}}return{status:t.status,error:new Error("Could not load data")}}function wt(r,e,t){let{stories:s}=e,{staff:o}=e;return r.$$set=n=>{"stories"in n&&t(0,s=n.stories),"staff"in n&&t(1,o=n.staff)},[s,o]}class yt extends re{constructor(e){super();le(this,e,wt,bt,ne,{stories:0,staff:1})}}export{yt as default,kt as load};
