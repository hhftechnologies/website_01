var $e=Object.defineProperty,He=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var ne=(o,e,t)=>e in o?$e(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,X=(o,e)=>{for(var t in e||(e={}))Se.call(e,t)&&ne(o,t,e[t]);if(re)for(var t of re(e))ye.call(e,t)&&ne(o,t,e[t]);return o},le=(o,e)=>He(o,Ee(e));import{Y as Te,S as Y,i as z,s as U,e as H,t as D,c as E,a as S,g as V,d as _,b as d,f as P,H as g,h as B,j as W,k as I,m as O,n as L,G as N,o as q,x as A,u as C,v as G,W as x,A as Me,Z as je,_ as Pe,I as F,$ as oe,M as Ie,a0 as Le,a1 as Ae,a2 as Ne,a3 as Ce,r as ie,a4 as Re,w as ae,a5 as ee,a6 as De,Q as te,a7 as ue,a8 as fe,y as Ve,L as We}from"../chunks/vendor-fb14e7c9.js";import{M as Oe}from"../chunks/Meta-5d653f15.js";import{H as qe}from"../chunks/HeroText-77fbc69c.js";import{w as Ge}from"../chunks/wordmark-0849a013.js";import{S as Ye}from"../chunks/Story-f227a245.js";import"../chunks/stores-4e369268.js";function ce({stories:o,category:e,copy:t,filter:s}){const r=o.filter(l=>l.home_text).filter(l=>l.home_pick.includes(s));if(!r.length)return"";Te(r);const n=new RegExp(`\\[${e}\\]`,"g");return t[e].replace(n,()=>{const l=r.pop();return`
    		<a href="https://pudding.cool/${l.url}" rel="external">
    			<span>${l.home_text}</span></a>
				<img src="common/assets/thumbnails/320/${l.slug}.jpg" alt="story thumbnail" />`})}function ze(o){let e,t,s,r,n,i,l,m,p,u,c=o[7].tagline+"",a,h,b,f,v,k,w,M,T;return{c(){e=H("h1"),t=H("div"),s=I(),r=H("div"),n=H("p"),i=H("span"),l=D("The Pudding"),m=I(),p=H("span"),u=new je,a=H("ins"),h=D(o[0]),b=D("."),f=I(),v=H("span"),k=I(),w=H("span"),M=I(),T=H("span"),this.h()},l($){e=E($,"H1",{"aria-label":!0});var y=S(e);t=E(y,"DIV",{class:!0});var se=S(t);se.forEach(_),y.forEach(_),s=L($),r=E($,"DIV",{class:!0});var Z=S(r);n=E(Z,"P",{class:!0});var R=S(n);i=E(R,"SPAN",{class:!0});var K=S(i);l=V(K,"The Pudding"),K.forEach(_),m=L(R),p=E(R,"SPAN",{class:!0});var Q=S(p);u=Pe(Q),a=E(Q,"INS",{class:!0});var j=S(a);h=V(j,o[0]),b=V(j,"."),j.forEach(_),Q.forEach(_),f=L(R),v=E(R,"SPAN",{class:!0});var we=S(v);we.forEach(_),k=L(R),w=E(R,"SPAN",{class:!0});var be=S(w);be.forEach(_),M=L(R),T=E(R,"SPAN",{class:!0});var ke=S(T);ke.forEach(_),R.forEach(_),Z.forEach(_),this.h()},h(){d(t,"class","wordmark svelte-1icc79m"),d(e,"aria-label",o[7].title),d(i,"class","sr-only"),u.a=a,d(a,"class","svelte-1icc79m"),N(a,"is-visible",o[0]),d(p,"class","tagline"),N(p,"is-del",o[0]),d(v,"class","popular svelte-1icc79m"),N(v,"is-visible",o[1]),d(w,"class","personal svelte-1icc79m"),N(w,"is-visible",o[1]),d(T,"class","welcome svelte-1icc79m"),N(T,"is-visible",o[2]),d(n,"class","svelte-1icc79m"),d(r,"class","letter svelte-1icc79m")},m($,y){P($,e,y),g(e,t),t.innerHTML=Ge,P($,s,y),P($,r,y),g(r,n),g(n,i),g(i,l),g(n,m),g(n,p),u.m(c,p),g(p,a),g(a,h),g(a,b),g(n,f),g(n,v),v.innerHTML=o[1],g(n,k),g(n,w),w.innerHTML=o[2],g(n,M),g(n,T),T.innerHTML=o[5]},p($,y){y&1&&B(h,$[0]),y&1&&N(a,"is-visible",$[0]),y&1&&N(p,"is-del",$[0]),y&2&&(v.innerHTML=$[1]),y&2&&N(v,"is-visible",$[1]),y&4&&(w.innerHTML=$[2]),y&2&&N(w,"is-visible",$[1]),y&32&&(T.innerHTML=$[5]),y&4&&N(T,"is-visible",$[2])},d($){$&&_(e),$&&_(s),$&&_(r)}}}function he(o){let e,t,s;return{c(){e=H("a"),t=D(o[3]),this.h()},l(r){e=E(r,"A",{href:!0,"sveltekit:prefetch":!0});var n=S(e);t=V(n,o[3]),n.forEach(_),this.h()},h(){d(e,"href",s="/author/"+o[4]),d(e,"sveltekit:prefetch","")},m(r,n){P(r,e,n),g(e,t)},p(r,n){n&8&&B(t,r[3]),n&16&&s!==(s="/author/"+r[4])&&d(e,"href",s)},d(r){r&&_(e)}}}function Ue(o){let e,t,s,r,n,i,l,m,p;t=new qe({props:{$$slots:{default:[ze]},$$scope:{ctx:o}}});let u=o[4]&&he(o);return{c(){e=H("section"),W(t.$$.fragment),s=I(),r=H("div"),n=H("p"),u&&u.c(),i=I(),l=H("p"),m=D(o[6]),this.h()},l(c){e=E(c,"SECTION",{id:!0,class:!0});var a=S(e);O(t.$$.fragment,a),s=L(a),r=E(a,"DIV",{class:!0});var h=S(r);n=E(h,"P",{class:!0});var b=S(n);u&&u.l(b),b.forEach(_),i=L(h),l=E(h,"P",{class:!0});var f=S(l);m=V(f,o[6]),f.forEach(_),h.forEach(_),a.forEach(_),this.h()},h(){d(n,"class","name"),d(l,"class","position"),d(r,"class","signature svelte-1icc79m"),N(r,"is-visible",o[2]),d(e,"id","intro"),d(e,"class","column-wide svelte-1icc79m")},m(c,a){P(c,e,a),q(t,e,null),g(e,s),g(e,r),g(r,n),u&&u.m(n,null),g(r,i),g(r,l),g(l,m),p=!0},p(c,[a]){const h={};a&16423&&(h.$$scope={dirty:a,ctx:c}),t.$set(h),c[4]?u?u.p(c,a):(u=he(c),u.c(),u.m(n,null)):u&&(u.d(1),u=null),(!p||a&64)&&B(m,c[6]),a&4&&N(r,"is-visible",c[2])},i(c){p||(A(t.$$.fragment,c),p=!0)},o(c){C(t.$$.fragment,c),p=!1},d(c){c&&_(e),G(t),u&&u.d()}}}function Be(o,e,t){const{stories:s,staff:r,copy:n}=x("Home");let i="",l="",m="",p="",u="",c="",a="";const h=()=>{t(1,l=ce({stories:s,copy:n,category:"popular",filter:"popular"}))},b=()=>{const k=7,{id:w,name:M,slug:T}=r[k],$=s.filter(y=>!l.includes(y.url));t(2,m=ce({stories:$,copy:n,category:"personal",filter:w})),t(3,p=M),t(4,u=T)},f=()=>{const k=Math.floor(Math.random()*n.taglines.length);t(0,i=` ${n.taglines[k]}`)},v=()=>{!m||(t(5,c=n.welcome),t(6,a="Pudding team member"))};return Me(()=>{f(),h(),b(),v()}),[i,l,m,p,u,c,a,n]}class Fe extends Y{constructor(e){super();z(this,e,Be,Ue,U,{})}}function Qe(o){let e,t,s;return{c(){e=H("a"),t=H("div"),s=H("p"),this.h()},l(r){e=E(r,"A",{href:!0,rel:!0,class:!0});var n=S(e);t=E(n,"DIV",{id:!0});var i=S(t);s=E(i,"P",{});var l=S(s);l.forEach(_),i.forEach(_),n.forEach(_),this.h()},h(){d(t,"id","promo"),d(e,"href",o[1]),d(e,"rel","extenral"),d(e,"class","svelte-1hjqwlk")},m(r,n){P(r,e,n),g(e,t),g(t,s),s.innerHTML=o[0]},p(r,[n]){n&1&&(s.innerHTML=r[0]),n&2&&d(e,"href",r[1])},i:F,o:F,d(r){r&&_(e)}}}function Ze(o,e,t){let{text:s}=e,{link:r}=e;return o.$$set=n=>{"text"in n&&t(0,s=n.text),"link"in n&&t(1,r=n.link)},[s,r]}class Je extends Y{constructor(e){super();z(this,e,Ze,Qe,U,{text:0,link:1})}}function Ke(o){let e,t,s,r,n,i=o[0].length+"",l,m,p,u,c;return{c(){e=H("div"),t=H("div"),s=H("input"),r=I(),n=H("p"),l=D(i),m=D(" stor"),p=D(o[2]),this.h()},l(a){e=E(a,"DIV",{id:!0,class:!0});var h=S(e);t=E(h,"DIV",{class:!0});var b=S(t);s=E(b,"INPUT",{placeholder:!0,class:!0}),r=L(b),n=E(b,"P",{class:!0});var f=S(n);l=V(f,i),m=V(f," stor"),p=V(f,o[2]),f.forEach(_),b.forEach(_),h.forEach(_),this.h()},h(){d(s,"placeholder","Search stories (e.g., Spotify)"),d(s,"class","svelte-13u3fd0"),d(n,"class","svelte-13u3fd0"),d(t,"class","inner column-wide svelte-13u3fd0"),d(e,"id","search"),d(e,"class","svelte-13u3fd0")},m(a,h){P(a,e,h),g(e,t),g(t,s),oe(s,o[1]),g(t,r),g(t,n),g(n,l),g(n,m),g(n,p),u||(c=Ie(s,"input",o[5]),u=!0)},p(a,[h]){h&2&&s.value!==a[1]&&oe(s,a[1]),h&1&&i!==(i=a[0].length+"")&&B(l,i),h&4&&B(p,a[2])},i:F,o:F,d(a){a&&_(e),u=!1,c()}}}const J=3;function Xe(o,e,t){let s,r,n,{highlight:i}=e;const{stories:l}=x("Home"),m=[{prop:"hed",weight:1},{prop:"dek",weight:1},{prop:"tease",weight:1},{prop:"keyword",weight:2}],p=Le();let u="";const c=k=>m.map(({prop:w})=>{if(typeof k[w]!="string")return{prop:w,tokens:k[w]};const $=Ae(k[w].toLowerCase()).split(/\W/).filter(y=>y.length>=J);return{prop:w,tokens:$}}),a=({prop:k,tokens:w},M)=>{const T=M.split(/\W/).filter(j=>j.length>=J).map(j=>j.toLowerCase()),{weight:$}=m.find(j=>j.prop===k),Z=T.map(j=>w.includes(j)).filter(j=>j).length*$,Q=T.map(j=>w.join(" ").includes(j)).filter(j=>j).length*$*.5;return Z+Q},h=(k,w)=>{const M=k.map(T=>a(T,w));return Ne(M)},b=k=>{const w=f.map(M=>le(X({},M),{score:h(M.search,k)})).filter(M=>M.score>0);return w.sort((M,T)=>Ce(M.score,T.score)),w},f=l.map(k=>({slug:k.slug,search:c(k)}));function v(){u=this.value,t(1,u)}return o.$$set=k=>{"highlight"in k&&t(0,i=k.highlight)},o.$$.update=()=>{o.$$.dirty&2&&t(3,s=u.toLowerCase().trim()),o.$$.dirty&8&&t(4,r=s.length>=J?b(s):f),o.$$.dirty&16&&t(0,i=r.map(k=>k.slug)),o.$$.dirty&8&&s.length>=J&&p("focus"),o.$$.dirty&1&&t(2,n=i.length===1?"y":"ies")},[i,u,n,s,r,v]}class xe extends Y{constructor(e){super();z(this,e,Xe,Ke,U,{highlight:0})}}function me(o,e,t){const s=o.slice();return s[8]=e[t].tease,s[9]=e[t].url,s[10]=e[t].slug,s[11]=e[t].month,s}function pe(o,e){let t,s,r,n;return s=new Ye({props:{tease:e[8],url:e[9],slug:e[10],month:e[11],collapse:!e[0].includes(e[10])}}),{key:o,first:null,c(){t=H("li"),W(s.$$.fragment),r=I(),this.h()},l(i){t=E(i,"LI",{class:!0});var l=S(t);O(s.$$.fragment,l),r=L(l),l.forEach(_),this.h()},h(){d(t,"class","svelte-7616wr"),this.first=t},m(i,l){P(i,t,l),q(s,t,null),g(t,r),n=!0},p(i,l){e=i;const m={};l&4&&(m.tease=e[8]),l&4&&(m.url=e[9]),l&4&&(m.slug=e[10]),l&4&&(m.month=e[11]),l&5&&(m.collapse=!e[0].includes(e[10])),s.$set(m)},i(i){n||(A(s.$$.fragment,i),n=!0)},o(i){C(s.$$.fragment,i),n=!1},d(i){i&&_(t),G(s)}}}function et(o){let e,t,s=o[3].storiesHed+"",r,n,i,l=[],m=new Map,p,u=o[2];const c=a=>a[10];for(let a=0;a<u.length;a+=1){let h=me(o,u,a),b=c(h);m.set(b,l[a]=pe(b,h))}return{c(){e=H("section"),t=H("h2"),r=D(s),n=I(),i=H("ul");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=E(a,"SECTION",{id:!0,class:!0});var h=S(e);t=E(h,"H2",{class:!0});var b=S(t);r=V(b,s),b.forEach(_),n=L(h),i=E(h,"UL",{});var f=S(i);for(let v=0;v<l.length;v+=1)l[v].l(f);f.forEach(_),h.forEach(_),this.h()},h(){d(t,"class","column-wide upper"),d(e,"id","stories"),d(e,"class","svelte-7616wr")},m(a,h){P(a,e,h),g(e,t),g(t,r),g(e,n),g(e,i);for(let b=0;b<l.length;b+=1)l[b].m(i,null);o[5](e),p=!0},p(a,[h]){h&5&&(u=a[2],ie(),l=Re(l,h,c,1,a,u,m,i,De,pe,null,me),ae())},i(a){if(!p){for(let h=0;h<u.length;h+=1)A(l[h]);p=!0}},o(a){for(let h=0;h<l.length;h+=1)C(l[h]);p=!1},d(a){a&&_(e);for(let h=0;h<l.length;h+=1)l[h].d();o[5](null)}}}function tt(o,e,t){const s=()=>{const{top:c}=l.getBoundingClientRect(),a=window.scrollY+c-64;window.scrollTo(0,a)};let{highlight:r}=e;const{stories:n,copy:i}=x("Home");let l;n.sort((c,a)=>ee(c.date,a.date));let m=n.map(c=>X({},c));const p=()=>{m.sort((c,a)=>ee(r.indexOf(c.slug),r.indexOf(a.slug))||ee(c.date,a.date)),t(2,m)};function u(c){te[c?"unshift":"push"](()=>{l=c,t(1,l)})}return o.$$set=c=>{"highlight"in c&&t(0,r=c.highlight)},o.$$.update=()=>{o.$$.dirty&1&&p()},[r,l,m,i,s,u]}class st extends Y{constructor(e){super();z(this,e,tt,et,U,{jump:4,highlight:0})}get jump(){return this.$$.ctx[4]}}function _e(o){let e,t;return e=new Je({props:{text:o[0].promo.text,link:o[0].promo.link}}),{c(){W(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,r){q(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.text=s[0].promo.text),r&1&&(n.link=s[0].promo.link),e.$set(n)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function rt(o){let e,t,s,r,n,i,l,m,p;e=new Fe({});let u=o[0].promo.text&&_e(o);function c(f){o[6](f)}let a={};o[1]!==void 0&&(a.highlight=o[1]),r=new xe({props:a}),te.push(()=>ue(r,"highlight",c)),r.$on("focus",o[3]);function h(f){o[7](f)}let b={highlight:o[1]};return o[2]!==void 0&&(b.jump=o[2]),l=new st({props:b}),te.push(()=>ue(l,"jump",h)),{c(){W(e.$$.fragment),t=I(),u&&u.c(),s=I(),W(r.$$.fragment),i=I(),W(l.$$.fragment)},l(f){O(e.$$.fragment,f),t=L(f),u&&u.l(f),s=L(f),O(r.$$.fragment,f),i=L(f),O(l.$$.fragment,f)},m(f,v){q(e,f,v),P(f,t,v),u&&u.m(f,v),P(f,s,v),q(r,f,v),P(f,i,v),q(l,f,v),p=!0},p(f,[v]){f[0].promo.text?u?(u.p(f,v),v&1&&A(u,1)):(u=_e(f),u.c(),A(u,1),u.m(s.parentNode,s)):u&&(ie(),C(u,1,1,()=>{u=null}),ae());const k={};!n&&v&2&&(n=!0,k.highlight=f[1],fe(()=>n=!1)),r.$set(k);const w={};v&2&&(w.highlight=f[1]),!m&&v&4&&(m=!0,w.jump=f[2],fe(()=>m=!1)),l.$set(w)},i(f){p||(A(e.$$.fragment,f),A(u),A(r.$$.fragment,f),A(l.$$.fragment,f),p=!0)},o(f){C(e.$$.fragment,f),C(u),C(r.$$.fragment,f),C(l.$$.fragment,f),p=!1},d(f){G(e,f),f&&_(t),u&&u.d(f),f&&_(s),G(r,f),f&&_(i),G(l,f)}}}function nt(o,e,t){let{copy:s}=e,{stories:r}=e,{staff:n}=e,i=r.map(c=>c.slug),l;Ve("Home",{stories:r,staff:n,copy:s});const m=()=>l();function p(c){i=c,t(1,i)}function u(c){l=c,t(2,l)}return o.$$set=c=>{"copy"in c&&t(0,s=c.copy),"stories"in c&&t(4,r=c.stories),"staff"in c&&t(5,n=c.staff)},[s,i,l,m,r,n,p,u]}class lt extends Y{constructor(e){super();z(this,e,nt,rt,U,{copy:0,stories:4,staff:5})}}function ge(o,e,t){const s=o.slice();return s[1]=e[t],s}function de(o){let e,t=o[1]+"",s,r;return{c(){e=H("a"),s=D(t),this.h()},l(n){e=E(n,"A",{href:!0});var i=S(e);s=V(i,t),i.forEach(_),this.h()},h(){d(e,"href",r="/author/"+o[1])},m(n,i){P(n,e,i),g(e,s)},p(n,i){i&1&&t!==(t=n[1]+"")&&B(s,t),i&1&&r!==(r="/author/"+n[1])&&d(e,"href",r)},d(n){n&&_(e)}}}function ot(o){let e,t=o[0],s=[];for(let r=0;r<t.length;r+=1)s[r]=de(ge(o,t,r));return{c(){e=H("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=E(r,"DIV",{class:!0});var n=S(e);for(let i=0;i<s.length;i+=1)s[i].l(n);n.forEach(_),this.h()},h(){d(e,"class","svelte-1l89d97")},m(r,n){P(r,e,n);for(let i=0;i<s.length;i+=1)s[i].m(e,null)},p(r,[n]){if(n&1){t=r[0];let i;for(i=0;i<t.length;i+=1){const l=ge(r,t,i);s[i]?s[i].p(l,n):(s[i]=de(l),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},i:F,o:F,d(r){r&&_(e),We(s,r)}}}function it(o,e,t){let{authors:s}=e;return o.$$set=r=>{"authors"in r&&t(0,s=r.authors)},[s]}class at extends Y{constructor(e){super();z(this,e,it,ot,U,{authors:0})}}const ut="The Pudding",ft="The Pudding explains ideas debated in culture with visual essays.",ct={text:"What\u2019s behind our name?",link:"https://www.npr.org/2012/08/24/159975466/corrections-and-comments-to-stories"},ht="is a digital publication that <del>explains ideas debated in culture with visual essays</del>",mt="You might have seen our story on [popular], but we\u2019ve also made stuff about [popular], [popular] or [popular].",pt="Some of my favorite projects are about [personal], [personal], and [personal].",_t="So, welcome to The Pudding. Get  cozy, you could be here a while. Explore all of our stories below.",gt="Our Stories",dt=["makes cool shit on the internet","makes awesome stories with data","brings you longform data journalism","creates visual essays with data","makes data fun","is the best internet rabbit hole"];var ve={title:ut,description:ft,promo:ct,tagline:ht,popular:mt,personal:pt,welcome:_t,storiesHed:gt,taglines:dt};function vt(o){let e,t,s,r,n,i;return e=new Oe({props:{copy:ve}}),s=new lt({props:{copy:ve,stories:o[0],staff:o[1]}}),n=new at({props:{authors:o[2]}}),{c(){W(e.$$.fragment),t=I(),W(s.$$.fragment),r=I(),W(n.$$.fragment)},l(l){O(e.$$.fragment,l),t=L(l),O(s.$$.fragment,l),r=L(l),O(n.$$.fragment,l)},m(l,m){q(e,l,m),P(l,t,m),q(s,l,m),P(l,r,m),q(n,l,m),i=!0},p(l,[m]){const p={};m&1&&(p.stories=l[0]),m&2&&(p.staff=l[1]),s.$set(p);const u={};m&4&&(u.authors=l[2]),n.$set(u)},i(l){i||(A(e.$$.fragment,l),A(s.$$.fragment,l),A(n.$$.fragment,l),i=!0)},o(l){C(e.$$.fragment,l),C(s.$$.fragment,l),C(n.$$.fragment,l),i=!1},d(l){G(e,l),l&&_(t),G(s,l),l&&_(r),G(n,l)}}}async function Tt({fetch:o}){const t=await o("/api/home.json");if(t.ok){const{stories:s,staff:r,authors:n}=await t.json();return{props:{stories:s,staff:r,authors:n}}}return{status:t.status,error:new Error("Could not load data")}}function wt(o,e,t){let{stories:s}=e,{staff:r}=e,{authors:n}=e;return o.$$set=i=>{"stories"in i&&t(0,s=i.stories),"staff"in i&&t(1,r=i.staff),"authors"in i&&t(2,n=i.authors)},[s,r,n]}class Mt extends Y{constructor(e){super();z(this,e,wt,vt,U,{stories:0,staff:1,authors:2})}}export{Mt as default,Tt as load};
