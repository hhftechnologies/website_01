var Se=Object.defineProperty,Ee=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ne=(l,e,t)=>e in l?Se(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Q=(l,e)=>{for(var t in e||(e={}))ke.call(e,t)&&ne(l,t,e[t]);if(re)for(var t of re(e))Te.call(e,t)&&ne(l,t,e[t]);return l},le=(l,e)=>Ee(l,je(e));import{W as ye,S as Y,i as z,s as B,e as H,t as D,c as S,a as E,g as V,d as g,b as d,f as P,H as _,h as U,j as O,k as I,m as W,n as L,G as C,o as q,x as N,u as A,v as G,V as x,A as Me,X as Pe,Y as Ie,I as F,Z as oe,L as Le,_ as Ne,$ as Ae,a0 as Ce,a1 as Re,r as ae,w as ie,K as ue,a2 as ee,P as te,a3 as ce,a4 as fe,y as De}from"../chunks/vendor-a4d942a5.js";import{H as Ve,M as Oe}from"../chunks/HeroText-0b395c12.js";import{w as We}from"../chunks/wordmark-7ce1bb0c.js";import{S as qe}from"../chunks/Story-b8bb5a8d.js";import"../chunks/stores-3bda58c4.js";function he({stories:l,category:e,copy:t,filter:s}){const r=l.filter(a=>a.home_text).filter(a=>a.home_pick.includes(s));if(!r.length)return"";ye(r);const n=new RegExp(`\\[${e}\\]`,"g");return t[e].replace(n,()=>{const a=r.pop();return`
    		<a href="https://pudding.cool/${a.url}" rel="external">
    			<span>${a.home_text}</span></a>
				<img src="common/assets/thumbnails/320/${a.slug}.jpg" alt="story thumbnail" />`})}function Ge(l){let e,t,s,r,n,o,a,m,h,c,i=l[7].tagline+"",u,p,j,f,$,b,v,y,T;return{c(){e=H("h1"),t=H("div"),s=I(),r=H("div"),n=H("p"),o=H("span"),a=D("The Pudding"),m=I(),h=H("span"),c=new Pe,u=H("ins"),p=D(l[0]),j=D("."),f=I(),$=H("span"),b=I(),v=H("span"),y=I(),T=H("span"),this.h()},l(w){e=S(w,"H1",{"aria-label":!0});var k=E(e);t=S(k,"DIV",{class:!0});var se=E(t);se.forEach(g),k.forEach(g),s=L(w),r=S(w,"DIV",{class:!0});var X=E(r);n=S(X,"P",{class:!0});var R=E(n);o=S(R,"SPAN",{class:!0});var J=E(o);a=V(J,"The Pudding"),J.forEach(g),m=L(R),h=S(R,"SPAN",{class:!0});var K=E(h);c=Ie(K),u=S(K,"INS",{class:!0});var M=E(u);p=V(M,l[0]),j=V(M,"."),M.forEach(g),K.forEach(g),f=L(R),$=S(R,"SPAN",{class:!0});var we=E($);we.forEach(g),b=L(R),v=S(R,"SPAN",{class:!0});var $e=E(v);$e.forEach(g),y=L(R),T=S(R,"SPAN",{class:!0});var He=E(T);He.forEach(g),R.forEach(g),X.forEach(g),this.h()},h(){d(t,"class","wordmark svelte-1cerj06"),d(e,"aria-label",l[7].title),d(o,"class","sr-only"),c.a=u,d(u,"class","svelte-1cerj06"),C(u,"is-visible",l[0]),d(h,"class","tagline"),C(h,"is-del",l[0]),d($,"class","popular svelte-1cerj06"),C($,"is-visible",l[1]),d(v,"class","personal svelte-1cerj06"),C(v,"is-visible",l[1]),d(T,"class","welcome svelte-1cerj06"),C(T,"is-visible",l[2]),d(n,"class","svelte-1cerj06"),d(r,"class","letter svelte-1cerj06")},m(w,k){P(w,e,k),_(e,t),t.innerHTML=We,P(w,s,k),P(w,r,k),_(r,n),_(n,o),_(o,a),_(n,m),_(n,h),c.m(i,h),_(h,u),_(u,p),_(u,j),_(n,f),_(n,$),$.innerHTML=l[1],_(n,b),_(n,v),v.innerHTML=l[2],_(n,y),_(n,T),T.innerHTML=l[5]},p(w,k){k&1&&U(p,w[0]),k&1&&C(u,"is-visible",w[0]),k&1&&C(h,"is-del",w[0]),k&2&&($.innerHTML=w[1]),k&2&&C($,"is-visible",w[1]),k&4&&(v.innerHTML=w[2]),k&2&&C(v,"is-visible",w[1]),k&32&&(T.innerHTML=w[5]),k&4&&C(T,"is-visible",w[2])},d(w){w&&g(e),w&&g(s),w&&g(r)}}}function pe(l){let e,t,s;return{c(){e=H("a"),t=D(l[3]),this.h()},l(r){e=S(r,"A",{href:!0,"sveltekit:prefetch":!0});var n=E(e);t=V(n,l[3]),n.forEach(g),this.h()},h(){d(e,"href",s="/author/"+l[4]),d(e,"sveltekit:prefetch","")},m(r,n){P(r,e,n),_(e,t)},p(r,n){n&8&&U(t,r[3]),n&16&&s!==(s="/author/"+r[4])&&d(e,"href",s)},d(r){r&&g(e)}}}function Ye(l){let e,t,s,r,n,o,a,m,h;t=new Ve({props:{$$slots:{default:[Ge]},$$scope:{ctx:l}}});let c=l[4]&&pe(l);return{c(){e=H("section"),O(t.$$.fragment),s=I(),r=H("div"),n=H("p"),c&&c.c(),o=I(),a=H("p"),m=D(l[6]),this.h()},l(i){e=S(i,"SECTION",{id:!0,class:!0});var u=E(e);W(t.$$.fragment,u),s=L(u),r=S(u,"DIV",{class:!0});var p=E(r);n=S(p,"P",{class:!0});var j=E(n);c&&c.l(j),j.forEach(g),o=L(p),a=S(p,"P",{class:!0});var f=E(a);m=V(f,l[6]),f.forEach(g),p.forEach(g),u.forEach(g),this.h()},h(){d(n,"class","name"),d(a,"class","position"),d(r,"class","signature svelte-1cerj06"),C(r,"is-visible",l[2]),d(e,"id","intro"),d(e,"class","column-wide svelte-1cerj06")},m(i,u){P(i,e,u),q(t,e,null),_(e,s),_(e,r),_(r,n),c&&c.m(n,null),_(r,o),_(r,a),_(a,m),h=!0},p(i,[u]){const p={};u&16423&&(p.$$scope={dirty:u,ctx:i}),t.$set(p),i[4]?c?c.p(i,u):(c=pe(i),c.c(),c.m(n,null)):c&&(c.d(1),c=null),(!h||u&64)&&U(m,i[6]),u&4&&C(r,"is-visible",i[2])},i(i){h||(N(t.$$.fragment,i),h=!0)},o(i){A(t.$$.fragment,i),h=!1},d(i){i&&g(e),G(t),c&&c.d()}}}function ze(l,e,t){const{stories:s,staff:r,copy:n}=x("Home");let o="",a="",m="",h="",c="",i="",u="";const p=()=>{t(1,a=he({stories:s,copy:n,category:"popular",filter:"popular"}))},j=()=>{const b=Math.floor(Math.random()*r.length),{id:v,name:y,slug:T}=r[b],w=s.filter(k=>!a.includes(k.url));t(2,m=he({stories:w,copy:n,category:"personal",filter:v})),t(3,h=y),t(4,c=T)},f=()=>{const b=Math.floor(Math.random()*n.taglines.length);t(0,o=` ${n.taglines[b]}`)},$=()=>{!m||(t(5,i=n.welcome),t(6,u="Pudding team member"))};return Me(()=>{f(),p(),j(),$()}),[o,a,m,h,c,i,u,n]}class Be extends Y{constructor(e){super();z(this,e,ze,Ye,B,{})}}function Ue(l){let e;return{c(){e=H("div"),this.h()},l(t){e=S(t,"DIV",{class:!0});var s=E(e);s.forEach(g),this.h()},h(){d(e,"class","svelte-het5lh")},m(t,s){P(t,e,s),e.innerHTML=l[0]},p(t,[s]){s&1&&(e.innerHTML=t[0])},i:F,o:F,d(t){t&&g(e)}}}function Fe(l,e,t){let{content:s}=e;return l.$$set=r=>{"content"in r&&t(0,s=r.content)},[s]}class Ke extends Y{constructor(e){super();z(this,e,Fe,Ue,B,{content:0})}}function Xe(l){let e,t,s,r,n,o=l[0].length+"",a,m,h,c,i;return{c(){e=H("div"),t=H("div"),s=H("input"),r=I(),n=H("p"),a=D(o),m=D(" stor"),h=D(l[2]),this.h()},l(u){e=S(u,"DIV",{id:!0,class:!0});var p=E(e);t=S(p,"DIV",{class:!0});var j=E(t);s=S(j,"INPUT",{placeholder:!0,class:!0}),r=L(j),n=S(j,"P",{class:!0});var f=E(n);a=V(f,o),m=V(f," stor"),h=V(f,l[2]),f.forEach(g),j.forEach(g),p.forEach(g),this.h()},h(){d(s,"placeholder","Search stories (e.g., Spotify)"),d(s,"class","svelte-7lglat"),d(n,"class","svelte-7lglat"),d(t,"class","inner column-wide svelte-7lglat"),d(e,"id","search"),d(e,"class","svelte-7lglat")},m(u,p){P(u,e,p),_(e,t),_(t,s),oe(s,l[1]),_(t,r),_(t,n),_(n,a),_(n,m),_(n,h),c||(i=Le(s,"input",l[5]),c=!0)},p(u,[p]){p&2&&s.value!==u[1]&&oe(s,u[1]),p&1&&o!==(o=u[0].length+"")&&U(a,o),p&4&&U(h,u[2])},i:F,o:F,d(u){u&&g(e),c=!1,i()}}}const Z=3;function Ze(l,e,t){let s,r,n,{highlight:o}=e;const{stories:a}=x("Home"),m=[{prop:"hed",weight:1},{prop:"dek",weight:1},{prop:"tease",weight:1},{prop:"keyword",weight:2}],h=Ne();let c="";const i=b=>m.map(({prop:v})=>{if(typeof b[v]!="string")return{prop:v,tokens:b[v]};const w=Ae(b[v].toLowerCase()).split(/\W/).filter(k=>k.length>=Z);return{prop:v,tokens:w}}),u=({prop:b,tokens:v},y)=>{const T=y.split(/\W/).filter(M=>M.length>=Z).map(M=>M.toLowerCase()),{weight:w}=m.find(M=>M.prop===b),X=T.map(M=>v.includes(M)).filter(M=>M).length*w,K=T.map(M=>v.join(" ").includes(M)).filter(M=>M).length*w*.5;return X+K},p=(b,v)=>{const y=b.map(T=>u(T,v));return Ce(y)},j=b=>{const v=f.map(y=>le(Q({},y),{score:p(y.search,b)})).filter(y=>y.score>0);return v.sort((y,T)=>Re(y.score,T.score)),v},f=a.map(b=>({slug:b.slug,search:i(b)}));function $(){c=this.value,t(1,c)}return l.$$set=b=>{"highlight"in b&&t(0,o=b.highlight)},l.$$.update=()=>{l.$$.dirty&2&&t(3,s=c.toLowerCase().trim()),l.$$.dirty&8&&t(4,r=s.length>=Z?j(s):f),l.$$.dirty&16&&t(0,o=r.map(b=>b.slug)),l.$$.dirty&8&&s.length>=Z&&h("focus"),l.$$.dirty&1&&t(2,n=o.length===1?"y":"ies")},[o,c,n,s,r,$]}class Je extends Y{constructor(e){super();z(this,e,Ze,Xe,B,{highlight:0})}}function me(l,e,t){const s=l.slice();return s[8]=e[t].tease,s[9]=e[t].url,s[10]=e[t].slug,s}function ge(l){let e,t,s,r;return t=new qe({props:{tease:l[8],url:l[9],slug:l[10],collapse:!l[0].includes(l[10])}}),{c(){e=H("li"),O(t.$$.fragment),s=I()},l(n){e=S(n,"LI",{});var o=E(e);W(t.$$.fragment,o),s=L(o),o.forEach(g)},m(n,o){P(n,e,o),q(t,e,null),_(e,s),r=!0},p(n,o){const a={};o&4&&(a.tease=n[8]),o&4&&(a.url=n[9]),o&4&&(a.slug=n[10]),o&5&&(a.collapse=!n[0].includes(n[10])),t.$set(a)},i(n){r||(N(t.$$.fragment,n),r=!0)},o(n){A(t.$$.fragment,n),r=!1},d(n){n&&g(e),G(t)}}}function Qe(l){let e,t,s=l[3].storiesHed+"",r,n,o,a,m=l[2],h=[];for(let i=0;i<m.length;i+=1)h[i]=ge(me(l,m,i));const c=i=>A(h[i],1,1,()=>{h[i]=null});return{c(){e=H("section"),t=H("h2"),r=D(s),n=I(),o=H("ul");for(let i=0;i<h.length;i+=1)h[i].c();this.h()},l(i){e=S(i,"SECTION",{id:!0,class:!0});var u=E(e);t=S(u,"H2",{class:!0});var p=E(t);r=V(p,s),p.forEach(g),n=L(u),o=S(u,"UL",{});var j=E(o);for(let f=0;f<h.length;f+=1)h[f].l(j);j.forEach(g),u.forEach(g),this.h()},h(){d(t,"class","column-wide upper"),d(e,"id","stories"),d(e,"class","svelte-fe1q9d")},m(i,u){P(i,e,u),_(e,t),_(t,r),_(e,n),_(e,o);for(let p=0;p<h.length;p+=1)h[p].m(o,null);l[5](e),a=!0},p(i,[u]){if(u&5){m=i[2];let p;for(p=0;p<m.length;p+=1){const j=me(i,m,p);h[p]?(h[p].p(j,u),N(h[p],1)):(h[p]=ge(j),h[p].c(),N(h[p],1),h[p].m(o,null))}for(ae(),p=m.length;p<h.length;p+=1)c(p);ie()}},i(i){if(!a){for(let u=0;u<m.length;u+=1)N(h[u]);a=!0}},o(i){h=h.filter(Boolean);for(let u=0;u<h.length;u+=1)A(h[u]);a=!1},d(i){i&&g(e),ue(h,i),l[5](null)}}}function xe(l,e,t){const s=()=>{const{top:i}=a.getBoundingClientRect(),u=window.scrollY+i-64;window.scrollTo(0,u)};let{highlight:r}=e;const{stories:n,copy:o}=x("Home");let a;n.sort((i,u)=>ee(i.date,u.date));let m=n.map(i=>Q({},i));const h=()=>{m.sort((i,u)=>ee(r.indexOf(i.slug),r.indexOf(u.slug))||ee(i.date,u.date)),t(2,m)};function c(i){te[i?"unshift":"push"](()=>{a=i,t(1,a)})}return l.$$set=i=>{"highlight"in i&&t(0,r=i.highlight)},l.$$.update=()=>{l.$$.dirty&1&&h()},[r,a,m,o,s,c]}class et extends Y{constructor(e){super();z(this,e,xe,Qe,B,{jump:4,highlight:0})}get jump(){return this.$$.ctx[4]}}function _e(l){let e,t;return e=new Ke({props:{content:l[0].promo}}),{c(){O(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,r){q(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.content=s[0].promo),e.$set(n)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function tt(l){let e,t,s,r,n,o,a,m,h;e=new Be({});let c=l[0].promo&&_e(l);function i(f){l[6](f)}let u={};l[1]!==void 0&&(u.highlight=l[1]),r=new Je({props:u}),te.push(()=>ce(r,"highlight",i)),r.$on("focus",l[3]);function p(f){l[7](f)}let j={highlight:l[1]};return l[2]!==void 0&&(j.jump=l[2]),a=new et({props:j}),te.push(()=>ce(a,"jump",p)),{c(){O(e.$$.fragment),t=I(),c&&c.c(),s=I(),O(r.$$.fragment),o=I(),O(a.$$.fragment)},l(f){W(e.$$.fragment,f),t=L(f),c&&c.l(f),s=L(f),W(r.$$.fragment,f),o=L(f),W(a.$$.fragment,f)},m(f,$){q(e,f,$),P(f,t,$),c&&c.m(f,$),P(f,s,$),q(r,f,$),P(f,o,$),q(a,f,$),h=!0},p(f,[$]){f[0].promo?c?(c.p(f,$),$&1&&N(c,1)):(c=_e(f),c.c(),N(c,1),c.m(s.parentNode,s)):c&&(ae(),A(c,1,1,()=>{c=null}),ie());const b={};!n&&$&2&&(n=!0,b.highlight=f[1],fe(()=>n=!1)),r.$set(b);const v={};$&2&&(v.highlight=f[1]),!m&&$&4&&(m=!0,v.jump=f[2],fe(()=>m=!1)),a.$set(v)},i(f){h||(N(e.$$.fragment,f),N(c),N(r.$$.fragment,f),N(a.$$.fragment,f),h=!0)},o(f){A(e.$$.fragment,f),A(c),A(r.$$.fragment,f),A(a.$$.fragment,f),h=!1},d(f){G(e,f),f&&g(t),c&&c.d(f),f&&g(s),G(r,f),f&&g(o),G(a,f)}}}function st(l,e,t){let{copy:s}=e,{stories:r}=e,{staff:n}=e,o=r.map(i=>i.slug),a;De("Home",{stories:r,staff:n,copy:s});const m=()=>a();function h(i){o=i,t(1,o)}function c(i){a=i,t(2,a)}return l.$$set=i=>{"copy"in i&&t(0,s=i.copy),"stories"in i&&t(4,r=i.stories),"staff"in i&&t(5,n=i.staff)},[s,o,a,m,r,n,h,c]}class rt extends Y{constructor(e){super();z(this,e,st,tt,B,{copy:0,stories:4,staff:5})}}function de(l,e,t){const s=l.slice();return s[1]=e[t],s}function ve(l){let e,t=l[1]+"",s,r;return{c(){e=H("a"),s=D(t),this.h()},l(n){e=S(n,"A",{href:!0});var o=E(e);s=V(o,t),o.forEach(g),this.h()},h(){d(e,"href",r="/author/"+l[1])},m(n,o){P(n,e,o),_(e,s)},p(n,o){o&1&&t!==(t=n[1]+"")&&U(s,t),o&1&&r!==(r="/author/"+n[1])&&d(e,"href",r)},d(n){n&&g(e)}}}function nt(l){let e,t=l[0],s=[];for(let r=0;r<t.length;r+=1)s[r]=ve(de(l,t,r));return{c(){e=H("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=S(r,"DIV",{class:!0});var n=E(e);for(let o=0;o<s.length;o+=1)s[o].l(n);n.forEach(g),this.h()},h(){d(e,"class","svelte-1l89d97")},m(r,n){P(r,e,n);for(let o=0;o<s.length;o+=1)s[o].m(e,null)},p(r,[n]){if(n&1){t=r[0];let o;for(o=0;o<t.length;o+=1){const a=de(r,t,o);s[o]?s[o].p(a,n):(s[o]=ve(a),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},i:F,o:F,d(r){r&&g(e),ue(s,r)}}}function lt(l,e,t){let{authors:s}=e;return l.$$set=r=>{"authors"in r&&t(0,s=r.authors)},[s]}class ot extends Y{constructor(e){super();z(this,e,lt,nt,B,{authors:0})}}const at="The Pudding",it="The Pudding explains ideas debated in culture with visual essays.",ut="",ct="is a digital publication that <del>explains ideas debated in culture with visual essays</del>",ft="You might have seen our story on [popular], but we\u2019ve also made stuff about [popular], [popular] or [popular].",ht="Some of my favorite projects are about [personal], [personal], and [personal].",pt="So, welcome to The Pudding. Get  cozy, you could be here a while. Explore all of our stories below.",mt="Our Stories",gt=["makes cool shit on the internet","makes awesome stories with data","brings you longform data journalism","creates visual essays with data","makes data fun","is the best internet rabbit hole"];var be={title:at,description:it,promo:ut,tagline:ct,popular:ft,personal:ht,welcome:pt,storiesHed:mt,taglines:gt};function _t(l){let e,t,s,r,n,o;return e=new Oe({props:{copy:be}}),s=new rt({props:{copy:be,stories:l[0],staff:l[1]}}),n=new ot({props:{authors:l[2]}}),{c(){O(e.$$.fragment),t=I(),O(s.$$.fragment),r=I(),O(n.$$.fragment)},l(a){W(e.$$.fragment,a),t=L(a),W(s.$$.fragment,a),r=L(a),W(n.$$.fragment,a)},m(a,m){q(e,a,m),P(a,t,m),q(s,a,m),P(a,r,m),q(n,a,m),o=!0},p(a,[m]){const h={};m&1&&(h.stories=a[0]),m&2&&(h.staff=a[1]),s.$set(h);const c={};m&4&&(c.authors=a[2]),n.$set(c)},i(a){o||(N(e.$$.fragment,a),N(s.$$.fragment,a),N(n.$$.fragment,a),o=!0)},o(a){A(e.$$.fragment,a),A(s.$$.fragment,a),A(n.$$.fragment,a),o=!1},d(a){G(e,a),a&&g(t),G(s,a),a&&g(r),G(n,a)}}}async function Et({fetch:l}){const t=await l("/api/home.json");if(t.ok){const{stories:s,staff:r,authors:n}=await t.json();return{props:{stories:s,staff:r,authors:n}}}return{status:t.status,error:new Error("Could not load data")}}function dt(l,e,t){let{stories:s}=e,{staff:r}=e,{authors:n}=e;return l.$$set=o=>{"stories"in o&&t(0,s=o.stories),"staff"in o&&t(1,r=o.staff),"authors"in o&&t(2,n=o.authors)},[s,r,n]}class jt extends Y{constructor(e){super();z(this,e,dt,_t,B,{stories:0,staff:1,authors:2})}}export{jt as default,Et as load};
